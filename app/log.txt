mongo mongodb://root:example@localhost:27017/
[2024/08/24 14:28;24] INFO     [Consumer:check-in-class] ğŸš©  Try connect in MQTT Server                                                           uncheck_user_broker.py:30
                      INFO     [Consumer:check-in-class] New client MQTT in broker.emqx.io:1883                                                   uncheck_user_broker.py:33
                      INFO     [Consumer:check-in-class] Subscribe in check-in-class ğŸ“ª                                                           uncheck_user_broker.py:44
CONNECTED IN MQTT SERVER:âœ”ï¸
mongo mongodb://root:example@localhost:27017/
[2024/08/24 14:28;39] INFO     [Consumer:check-in-class] ğŸš©  Try connect in MQTT Server                                                           uncheck_user_broker.py:30
                      INFO     [Consumer:check-in-class] New client MQTT in broker.emqx.io:1883                                                   uncheck_user_broker.py:33
                      INFO     [Consumer:check-in-class] Subscribe in check-in-class ğŸ“ª                                                           uncheck_user_broker.py:44
CONNECTED IN MQTT SERVER:âœ”ï¸
mongo mongodb://root:example@localhost:27017/
[2024/08/24 14:35;35] INFO     [Consumer:check-in-class] ğŸš©  Try connect in MQTT Server                                                           uncheck_user_broker.py:30
 * Debug mode: off
                      INFO     [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server         _internal.py:96
                               instead.[0m                                                                                                                                 
                                * Running on http://127.0.0.1:5000                                                                                                         
                      INFO     [33mPress CTRL+C to quit[0m                                                                                                  _internal.py:96
                      INFO     [Consumer:check-in-class] New client MQTT in broker.emqx.io:1883                                                   uncheck_user_broker.py:33
                      INFO     [Consumer:check-in-class] Subscribe in check-in-class ğŸ“ª                                                           uncheck_user_broker.py:44
CONNECTED IN MQTT SERVER:âœ”ï¸
[2024/08/24 14:35;42] INFO     [Repository:class] save new class with begin: 2024-08-24 10:00:00 and end: 2024-08-24 10:00:00 ğŸ§¾                     class_repository.py:24
                      ERROR    Exception on /class [POST]                                                                                                        app.py:838
                               â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/flask/app.py:880 in full_dispatch_request              â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚    877 â”‚   â”‚   â”‚   request_started.send(self, _async_wrapper=self.ensure_sync)                                                â”‚           
                               â”‚    878 â”‚   â”‚   â”‚   rv = self.preprocess_request()                                                                             â”‚           
                               â”‚    879 â”‚   â”‚   â”‚   if rv is None:                                                                                             â”‚           
                               â”‚ â±  880 â”‚   â”‚   â”‚   â”‚   rv = self.dispatch_request()                                                                           â”‚           
                               â”‚    881 â”‚   â”‚   except Exception as e:                                                                                         â”‚           
                               â”‚    882 â”‚   â”‚   â”‚   rv = self.handle_user_exception(e)                                                                         â”‚           
                               â”‚    883 â”‚   â”‚   return self.finalize_request(rv)                                                                               â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/flask/app.py:865 in dispatch_request                   â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚    862 â”‚   â”‚   â”‚   return self.make_default_options_response()                                                                â”‚           
                               â”‚    863 â”‚   â”‚   # otherwise dispatch to the handler for that endpoint                                                          â”‚           
                               â”‚    864 â”‚   â”‚   view_args: dict[str, t.Any] = req.view_args  # type: ignore[assignment]                                        â”‚           
                               â”‚ â±  865 â”‚   â”‚   return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  #                                    â”‚           
                               â”‚        type: ignore[no-any-return]                                                                                            â”‚           
                               â”‚    866 â”‚                                                                                                                      â”‚           
                               â”‚    867 â”‚   def full_dispatch_request(self) -> Response:                                                                       â”‚           
                               â”‚    868 â”‚   â”‚   """Dispatches the request and on top of that performs request                                                  â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/flask_restful/__init__.py:489 in wrapper               â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   486 â”‚   â”‚   """                                                                                                             â”‚           
                               â”‚   487 â”‚   â”‚   @wraps(resource)                                                                                                â”‚           
                               â”‚   488 â”‚   â”‚   def wrapper(*args, **kwargs):                                                                                   â”‚           
                               â”‚ â± 489 â”‚   â”‚   â”‚   resp = resource(*args, **kwargs)                                                                            â”‚           
                               â”‚   490 â”‚   â”‚   â”‚   if isinstance(resp, ResponseBase):  # There may be a better way to test                                     â”‚           
                               â”‚   491 â”‚   â”‚   â”‚   â”‚   return resp                                                                                             â”‚           
                               â”‚   492 â”‚   â”‚   â”‚   data, code, headers = unpack(resp)                                                                          â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/flask/views.py:110 in view                             â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   107 â”‚   â”‚   â”‚   â”‚   self = view.view_class(  # type: ignore[attr-defined]                                                   â”‚           
                               â”‚   108 â”‚   â”‚   â”‚   â”‚   â”‚   *class_args, **class_kwargs                                                                         â”‚           
                               â”‚   109 â”‚   â”‚   â”‚   â”‚   )                                                                                                       â”‚           
                               â”‚ â± 110 â”‚   â”‚   â”‚   â”‚   return current_app.ensure_sync(self.dispatch_request)(**kwargs)  # type:                                â”‚           
                               â”‚       ignore[no-any-return]                                                                                                   â”‚           
                               â”‚   111 â”‚   â”‚                                                                                                                   â”‚           
                               â”‚   112 â”‚   â”‚   else:                                                                                                           â”‚           
                               â”‚   113 â”‚   â”‚   â”‚   self = cls(*class_args, **class_kwargs)                                                                     â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/flask_restful/__init__.py:604 in dispatch_request      â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   601 â”‚   â”‚   for decorator in decorators:                                                                                    â”‚           
                               â”‚   602 â”‚   â”‚   â”‚   meth = decorator(meth)                                                                                      â”‚           
                               â”‚   603 â”‚   â”‚                                                                                                                   â”‚           
                               â”‚ â± 604 â”‚   â”‚   resp = meth(*args, **kwargs)                                                                                    â”‚           
                               â”‚   605 â”‚   â”‚                                                                                                                   â”‚           
                               â”‚   606 â”‚   â”‚   if isinstance(resp, ResponseBase):  # There may be a better way to test                                         â”‚           
                               â”‚   607 â”‚   â”‚   â”‚   return resp                                                                                                 â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/projects/python/check-cefet-refactor/app/infrastructure/http/class_uncherdule_resource.py:22 in post             â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   19 â”‚   â”‚   data = request.json                                                                                              â”‚           
                               â”‚   20 â”‚   â”‚   classSchedule = ClassSchedule(name=data['name'],                                                                 â”‚           
                               â”‚      start=datetime.fromisoformat(data['start']),                                                                             â”‚           
                               â”‚   21 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚     end=datetime.fromisoformat(data['start']))                                         â”‚           
                               â”‚ â± 22 â”‚   â”‚   self.service.save(classSchedule)                                                                                 â”‚           
                               â”‚   23 â”‚   â”‚   return {'message': 'class has  been created successfully.'}, 201                                                 â”‚           
                               â”‚   24                                                                                                                          â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/projects/python/check-cefet-refactor/app/domain/class_schedule/class_scherdule_service.py:20 in save             â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   17 â”‚   â”‚   return self.classRepository.findCurrentClass();                                                                  â”‚           
                               â”‚   18 â”‚                                                                                                                        â”‚           
                               â”‚   19 â”‚   def save(self, classScherdule):                                                                                      â”‚           
                               â”‚ â± 20 â”‚   â”‚   return self.classRepository.save(classScherdule)                                                                 â”‚           
                               â”‚   21                                                                                                                          â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/projects/python/check-cefet-refactor/app/infrastructure/database/class_repository.py:25 in save                  â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   22 â”‚                                                                                                                        â”‚           
                               â”‚   23 â”‚   def save(self, classSchedule):                                                                                       â”‚           
                               â”‚   24 â”‚   â”‚   self.logger.info(f"save new class with begin: {classSchedule.start} and end:                                     â”‚           
                               â”‚      {classSchedule.end} ğŸ§¾")                                                                                                 â”‚           
                               â”‚ â± 25 â”‚   â”‚                                                                                                                    â”‚           
                               â”‚      self.mongo[settings.get("MONGO_DATABASE")[self.collection]].insertOne(classSchedule)                                     â”‚           
                               â”‚   26                                                                                                                          â”‚           
                               â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯           
                               TypeError: string indices must be integers, not 'str'                                                                                       
                      INFO     127.0.0.1 - - [24/Aug/2024 14:35:42] "[35m[1mPOST /class HTTP/1.1[0m" 500 -                                                  _internal.py:96
mongo mongodb://root:example@localhost:27017/
[2024/08/24 14:56;50] INFO     [Consumer:check-in-class] ğŸš©  Try connect in MQTT Server                                                           uncheck_user_broker.py:30
 * Debug mode: off
                      INFO     [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server         _internal.py:96
                               instead.[0m                                                                                                                                 
                                * Running on http://127.0.0.1:5000                                                                                                         
                      INFO     [33mPress CTRL+C to quit[0m                                                                                                  _internal.py:96
                      INFO     [Consumer:check-in-class] New client MQTT in broker.emqx.io:1883                                                   uncheck_user_broker.py:33
                      INFO     [Consumer:check-in-class] Subscribe in check-in-class ğŸ“ª                                                           uncheck_user_broker.py:44
CONNECTED IN MQTT SERVER:âœ”ï¸
[2024/08/24 14:56;55] INFO     [Repository:class] save new class with begin: 2024-08-24 10:00:00 and end: 2024-08-24 10:00:00 ğŸ§¾                     class_repository.py:24
<app.domain.class_schedule.class_schedule.ClassSchedule object at 0x7f00c5a04890>
                      ERROR    Exception on /class [POST]                                                                                                        app.py:838
                               â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/flask/app.py:880 in full_dispatch_request              â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚    877 â”‚   â”‚   â”‚   request_started.send(self, _async_wrapper=self.ensure_sync)                                                â”‚           
                               â”‚    878 â”‚   â”‚   â”‚   rv = self.preprocess_request()                                                                             â”‚           
                               â”‚    879 â”‚   â”‚   â”‚   if rv is None:                                                                                             â”‚           
                               â”‚ â±  880 â”‚   â”‚   â”‚   â”‚   rv = self.dispatch_request()                                                                           â”‚           
                               â”‚    881 â”‚   â”‚   except Exception as e:                                                                                         â”‚           
                               â”‚    882 â”‚   â”‚   â”‚   rv = self.handle_user_exception(e)                                                                         â”‚           
                               â”‚    883 â”‚   â”‚   return self.finalize_request(rv)                                                                               â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/flask/app.py:865 in dispatch_request                   â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚    862 â”‚   â”‚   â”‚   return self.make_default_options_response()                                                                â”‚           
                               â”‚    863 â”‚   â”‚   # otherwise dispatch to the handler for that endpoint                                                          â”‚           
                               â”‚    864 â”‚   â”‚   view_args: dict[str, t.Any] = req.view_args  # type: ignore[assignment]                                        â”‚           
                               â”‚ â±  865 â”‚   â”‚   return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  #                                    â”‚           
                               â”‚        type: ignore[no-any-return]                                                                                            â”‚           
                               â”‚    866 â”‚                                                                                                                      â”‚           
                               â”‚    867 â”‚   def full_dispatch_request(self) -> Response:                                                                       â”‚           
                               â”‚    868 â”‚   â”‚   """Dispatches the request and on top of that performs request                                                  â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/flask_restful/__init__.py:489 in wrapper               â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   486 â”‚   â”‚   """                                                                                                             â”‚           
                               â”‚   487 â”‚   â”‚   @wraps(resource)                                                                                                â”‚           
                               â”‚   488 â”‚   â”‚   def wrapper(*args, **kwargs):                                                                                   â”‚           
                               â”‚ â± 489 â”‚   â”‚   â”‚   resp = resource(*args, **kwargs)                                                                            â”‚           
                               â”‚   490 â”‚   â”‚   â”‚   if isinstance(resp, ResponseBase):  # There may be a better way to test                                     â”‚           
                               â”‚   491 â”‚   â”‚   â”‚   â”‚   return resp                                                                                             â”‚           
                               â”‚   492 â”‚   â”‚   â”‚   data, code, headers = unpack(resp)                                                                          â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/flask/views.py:110 in view                             â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   107 â”‚   â”‚   â”‚   â”‚   self = view.view_class(  # type: ignore[attr-defined]                                                   â”‚           
                               â”‚   108 â”‚   â”‚   â”‚   â”‚   â”‚   *class_args, **class_kwargs                                                                         â”‚           
                               â”‚   109 â”‚   â”‚   â”‚   â”‚   )                                                                                                       â”‚           
                               â”‚ â± 110 â”‚   â”‚   â”‚   â”‚   return current_app.ensure_sync(self.dispatch_request)(**kwargs)  # type:                                â”‚           
                               â”‚       ignore[no-any-return]                                                                                                   â”‚           
                               â”‚   111 â”‚   â”‚                                                                                                                   â”‚           
                               â”‚   112 â”‚   â”‚   else:                                                                                                           â”‚           
                               â”‚   113 â”‚   â”‚   â”‚   self = cls(*class_args, **class_kwargs)                                                                     â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/flask_restful/__init__.py:604 in dispatch_request      â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   601 â”‚   â”‚   for decorator in decorators:                                                                                    â”‚           
                               â”‚   602 â”‚   â”‚   â”‚   meth = decorator(meth)                                                                                      â”‚           
                               â”‚   603 â”‚   â”‚                                                                                                                   â”‚           
                               â”‚ â± 604 â”‚   â”‚   resp = meth(*args, **kwargs)                                                                                    â”‚           
                               â”‚   605 â”‚   â”‚                                                                                                                   â”‚           
                               â”‚   606 â”‚   â”‚   if isinstance(resp, ResponseBase):  # There may be a better way to test                                         â”‚           
                               â”‚   607 â”‚   â”‚   â”‚   return resp                                                                                                 â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/projects/python/check-cefet-refactor/app/infrastructure/http/class_uncherdule_resource.py:22 in post             â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   19 â”‚   â”‚   data = request.json                                                                                              â”‚           
                               â”‚   20 â”‚   â”‚   classSchedule = ClassSchedule(name=data['name'],                                                                 â”‚           
                               â”‚      start=datetime.fromisoformat(data['start']),                                                                             â”‚           
                               â”‚   21 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚     end=datetime.fromisoformat(data['start']))                                         â”‚           
                               â”‚ â± 22 â”‚   â”‚   self.service.save(classSchedule)                                                                                 â”‚           
                               â”‚   23 â”‚   â”‚   return {'message': 'class has  been created successfully.'}, 201                                                 â”‚           
                               â”‚   24                                                                                                                          â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/projects/python/check-cefet-refactor/app/domain/class_schedule/class_scherdule_service.py:20 in save             â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   17 â”‚   â”‚   return self.classRepository.findCurrentClass();                                                                  â”‚           
                               â”‚   18 â”‚                                                                                                                        â”‚           
                               â”‚   19 â”‚   def save(self, classScherdule):                                                                                      â”‚           
                               â”‚ â± 20 â”‚   â”‚   return self.classRepository.save(classScherdule)                                                                 â”‚           
                               â”‚   21                                                                                                                          â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/projects/python/check-cefet-refactor/app/infrastructure/database/class_repository.py:26 in save                  â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   23 â”‚   def save(self, classSchedule : ClassSchedule):                                                                       â”‚           
                               â”‚   24 â”‚   â”‚   self.logger.info(f"save new class with begin: {classSchedule.start} and end:                                     â”‚           
                               â”‚      {classSchedule.end} ğŸ§¾")                                                                                                 â”‚           
                               â”‚   25 â”‚   â”‚   print(classSchedule)                                                                                             â”‚           
                               â”‚ â± 26 â”‚   â”‚   self.mongo[settings.get("MONGO_DATABASE")[self.collection]].insertOne({'name' :                                  â”‚           
                               â”‚      classSchedule.name,                                                                                                      â”‚           
                               â”‚   27 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚      'end':                                    â”‚           
                               â”‚      classSchedule.end,                                                                                                       â”‚           
                               â”‚   28 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   'start':                                 â”‚           
                               â”‚      classSchedule.start                                                                                                      â”‚           
                               â”‚   29 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚      })                                        â”‚           
                               â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯           
                               TypeError: string indices must be integers, not 'str'                                                                                       
                      INFO     127.0.0.1 - - [24/Aug/2024 14:56:55] "[35m[1mPOST /class HTTP/1.1[0m" 500 -                                                  _internal.py:96
mongo mongodb://root:example@localhost:27017/
[2024/08/24 14:58;48] INFO     [Consumer:check-in-class] ğŸš©  Try connect in MQTT Server                                                           uncheck_user_broker.py:30
 * Debug mode: off
                      INFO     [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server         _internal.py:96
                               instead.[0m                                                                                                                                 
                                * Running on http://127.0.0.1:5000                                                                                                         
                      INFO     [33mPress CTRL+C to quit[0m                                                                                                  _internal.py:96
                      INFO     [Consumer:check-in-class] New client MQTT in broker.emqx.io:1883                                                   uncheck_user_broker.py:33
                      INFO     [Consumer:check-in-class] Subscribe in check-in-class ğŸ“ª                                                           uncheck_user_broker.py:44
CONNECTED IN MQTT SERVER:âœ”ï¸
[2024/08/24 14:58;52] INFO     [Repository:class] save new class with begin: 2024-08-24 10:00:00 and end: 2024-08-24 10:00:00 ğŸ§¾                     class_repository.py:24
<app.domain.class_schedule.class_schedule.ClassSchedule object at 0x7f4355ee0b60>
                      ERROR    Exception on /class [POST]                                                                                                        app.py:838
                               â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/flask/app.py:880 in full_dispatch_request              â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚    877 â”‚   â”‚   â”‚   request_started.send(self, _async_wrapper=self.ensure_sync)                                                â”‚           
                               â”‚    878 â”‚   â”‚   â”‚   rv = self.preprocess_request()                                                                             â”‚           
                               â”‚    879 â”‚   â”‚   â”‚   if rv is None:                                                                                             â”‚           
                               â”‚ â±  880 â”‚   â”‚   â”‚   â”‚   rv = self.dispatch_request()                                                                           â”‚           
                               â”‚    881 â”‚   â”‚   except Exception as e:                                                                                         â”‚           
                               â”‚    882 â”‚   â”‚   â”‚   rv = self.handle_user_exception(e)                                                                         â”‚           
                               â”‚    883 â”‚   â”‚   return self.finalize_request(rv)                                                                               â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/flask/app.py:865 in dispatch_request                   â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚    862 â”‚   â”‚   â”‚   return self.make_default_options_response()                                                                â”‚           
                               â”‚    863 â”‚   â”‚   # otherwise dispatch to the handler for that endpoint                                                          â”‚           
                               â”‚    864 â”‚   â”‚   view_args: dict[str, t.Any] = req.view_args  # type: ignore[assignment]                                        â”‚           
                               â”‚ â±  865 â”‚   â”‚   return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  #                                    â”‚           
                               â”‚        type: ignore[no-any-return]                                                                                            â”‚           
                               â”‚    866 â”‚                                                                                                                      â”‚           
                               â”‚    867 â”‚   def full_dispatch_request(self) -> Response:                                                                       â”‚           
                               â”‚    868 â”‚   â”‚   """Dispatches the request and on top of that performs request                                                  â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/flask_restful/__init__.py:489 in wrapper               â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   486 â”‚   â”‚   """                                                                                                             â”‚           
                               â”‚   487 â”‚   â”‚   @wraps(resource)                                                                                                â”‚           
                               â”‚   488 â”‚   â”‚   def wrapper(*args, **kwargs):                                                                                   â”‚           
                               â”‚ â± 489 â”‚   â”‚   â”‚   resp = resource(*args, **kwargs)                                                                            â”‚           
                               â”‚   490 â”‚   â”‚   â”‚   if isinstance(resp, ResponseBase):  # There may be a better way to test                                     â”‚           
                               â”‚   491 â”‚   â”‚   â”‚   â”‚   return resp                                                                                             â”‚           
                               â”‚   492 â”‚   â”‚   â”‚   data, code, headers = unpack(resp)                                                                          â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/flask/views.py:110 in view                             â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   107 â”‚   â”‚   â”‚   â”‚   self = view.view_class(  # type: ignore[attr-defined]                                                   â”‚           
                               â”‚   108 â”‚   â”‚   â”‚   â”‚   â”‚   *class_args, **class_kwargs                                                                         â”‚           
                               â”‚   109 â”‚   â”‚   â”‚   â”‚   )                                                                                                       â”‚           
                               â”‚ â± 110 â”‚   â”‚   â”‚   â”‚   return current_app.ensure_sync(self.dispatch_request)(**kwargs)  # type:                                â”‚           
                               â”‚       ignore[no-any-return]                                                                                                   â”‚           
                               â”‚   111 â”‚   â”‚                                                                                                                   â”‚           
                               â”‚   112 â”‚   â”‚   else:                                                                                                           â”‚           
                               â”‚   113 â”‚   â”‚   â”‚   self = cls(*class_args, **class_kwargs)                                                                     â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/flask_restful/__init__.py:604 in dispatch_request      â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   601 â”‚   â”‚   for decorator in decorators:                                                                                    â”‚           
                               â”‚   602 â”‚   â”‚   â”‚   meth = decorator(meth)                                                                                      â”‚           
                               â”‚   603 â”‚   â”‚                                                                                                                   â”‚           
                               â”‚ â± 604 â”‚   â”‚   resp = meth(*args, **kwargs)                                                                                    â”‚           
                               â”‚   605 â”‚   â”‚                                                                                                                   â”‚           
                               â”‚   606 â”‚   â”‚   if isinstance(resp, ResponseBase):  # There may be a better way to test                                         â”‚           
                               â”‚   607 â”‚   â”‚   â”‚   return resp                                                                                                 â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/projects/python/check-cefet-refactor/app/infrastructure/http/class_uncherdule_resource.py:22 in post             â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   19 â”‚   â”‚   data = request.json                                                                                              â”‚           
                               â”‚   20 â”‚   â”‚   classSchedule = ClassSchedule(name=data['name'],                                                                 â”‚           
                               â”‚      start=datetime.fromisoformat(data['start']),                                                                             â”‚           
                               â”‚   21 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚     end=datetime.fromisoformat(data['start']))                                         â”‚           
                               â”‚ â± 22 â”‚   â”‚   self.service.save(classSchedule)                                                                                 â”‚           
                               â”‚   23 â”‚   â”‚   return {'message': 'class has  been created successfully.'}, 201                                                 â”‚           
                               â”‚   24                                                                                                                          â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/projects/python/check-cefet-refactor/app/domain/class_schedule/class_scherdule_service.py:20 in save             â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   17 â”‚   â”‚   return self.classRepository.findCurrentClass();                                                                  â”‚           
                               â”‚   18 â”‚                                                                                                                        â”‚           
                               â”‚   19 â”‚   def save(self, classScherdule):                                                                                      â”‚           
                               â”‚ â± 20 â”‚   â”‚   return self.classRepository.save(classScherdule)                                                                 â”‚           
                               â”‚   21                                                                                                                          â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/projects/python/check-cefet-refactor/app/infrastructure/database/class_repository.py:27 in save                  â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   24 â”‚   â”‚   self.logger.info(f"save new class with begin: {classSchedule.start} and end:                                     â”‚           
                               â”‚      {classSchedule.end} ğŸ§¾")                                                                                                 â”‚           
                               â”‚   25 â”‚   â”‚   pprint(classSchedule)                                                                                            â”‚           
                               â”‚   26 â”‚   â”‚                                                                                                                    â”‚           
                               â”‚ â± 27 â”‚   â”‚   self.mongo[settings.get("MONGO_DATABASE")[self.collection]].insertOne({'name' :                                  â”‚           
                               â”‚      classSchedule.name,                                                                                                      â”‚           
                               â”‚   28 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚      'end':                                    â”‚           
                               â”‚      classSchedule.end,                                                                                                       â”‚           
                               â”‚   29 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   'start':                                 â”‚           
                               â”‚      classSchedule.start                                                                                                      â”‚           
                               â”‚   30 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚      })                                        â”‚           
                               â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯           
                               TypeError: string indices must be integers, not 'str'                                                                                       
[2024/08/24 14:58;53] INFO     127.0.0.1 - - [24/Aug/2024 14:58:53] "[35m[1mPOST /class HTTP/1.1[0m" 500 -                                                  _internal.py:96
[2024/08/24 14:59;17] INFO     [Repository:class] save new class with begin: 2024-08-24 10:00:00 and end: 2024-08-24 10:00:00 ğŸ§¾                     class_repository.py:24
<app.domain.class_schedule.class_schedule.ClassSchedule object at 0x7f4355ee17f0>
                      ERROR    Exception on /class [POST]                                                                                                        app.py:838
                               â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/flask/app.py:880 in full_dispatch_request              â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚    877 â”‚   â”‚   â”‚   request_started.send(self, _async_wrapper=self.ensure_sync)                                                â”‚           
                               â”‚    878 â”‚   â”‚   â”‚   rv = self.preprocess_request()                                                                             â”‚           
                               â”‚    879 â”‚   â”‚   â”‚   if rv is None:                                                                                             â”‚           
                               â”‚ â±  880 â”‚   â”‚   â”‚   â”‚   rv = self.dispatch_request()                                                                           â”‚           
                               â”‚    881 â”‚   â”‚   except Exception as e:                                                                                         â”‚           
                               â”‚    882 â”‚   â”‚   â”‚   rv = self.handle_user_exception(e)                                                                         â”‚           
                               â”‚    883 â”‚   â”‚   return self.finalize_request(rv)                                                                               â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/flask/app.py:865 in dispatch_request                   â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚    862 â”‚   â”‚   â”‚   return self.make_default_options_response()                                                                â”‚           
                               â”‚    863 â”‚   â”‚   # otherwise dispatch to the handler for that endpoint                                                          â”‚           
                               â”‚    864 â”‚   â”‚   view_args: dict[str, t.Any] = req.view_args  # type: ignore[assignment]                                        â”‚           
                               â”‚ â±  865 â”‚   â”‚   return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  #                                    â”‚           
                               â”‚        type: ignore[no-any-return]                                                                                            â”‚           
                               â”‚    866 â”‚                                                                                                                      â”‚           
                               â”‚    867 â”‚   def full_dispatch_request(self) -> Response:                                                                       â”‚           
                               â”‚    868 â”‚   â”‚   """Dispatches the request and on top of that performs request                                                  â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/flask_restful/__init__.py:489 in wrapper               â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   486 â”‚   â”‚   """                                                                                                             â”‚           
                               â”‚   487 â”‚   â”‚   @wraps(resource)                                                                                                â”‚           
                               â”‚   488 â”‚   â”‚   def wrapper(*args, **kwargs):                                                                                   â”‚           
                               â”‚ â± 489 â”‚   â”‚   â”‚   resp = resource(*args, **kwargs)                                                                            â”‚           
                               â”‚   490 â”‚   â”‚   â”‚   if isinstance(resp, ResponseBase):  # There may be a better way to test                                     â”‚           
                               â”‚   491 â”‚   â”‚   â”‚   â”‚   return resp                                                                                             â”‚           
                               â”‚   492 â”‚   â”‚   â”‚   data, code, headers = unpack(resp)                                                                          â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/flask/views.py:110 in view                             â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   107 â”‚   â”‚   â”‚   â”‚   self = view.view_class(  # type: ignore[attr-defined]                                                   â”‚           
                               â”‚   108 â”‚   â”‚   â”‚   â”‚   â”‚   *class_args, **class_kwargs                                                                         â”‚           
                               â”‚   109 â”‚   â”‚   â”‚   â”‚   )                                                                                                       â”‚           
                               â”‚ â± 110 â”‚   â”‚   â”‚   â”‚   return current_app.ensure_sync(self.dispatch_request)(**kwargs)  # type:                                â”‚           
                               â”‚       ignore[no-any-return]                                                                                                   â”‚           
                               â”‚   111 â”‚   â”‚                                                                                                                   â”‚           
                               â”‚   112 â”‚   â”‚   else:                                                                                                           â”‚           
                               â”‚   113 â”‚   â”‚   â”‚   self = cls(*class_args, **class_kwargs)                                                                     â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/flask_restful/__init__.py:604 in dispatch_request      â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   601 â”‚   â”‚   for decorator in decorators:                                                                                    â”‚           
                               â”‚   602 â”‚   â”‚   â”‚   meth = decorator(meth)                                                                                      â”‚           
                               â”‚   603 â”‚   â”‚                                                                                                                   â”‚           
                               â”‚ â± 604 â”‚   â”‚   resp = meth(*args, **kwargs)                                                                                    â”‚           
                               â”‚   605 â”‚   â”‚                                                                                                                   â”‚           
                               â”‚   606 â”‚   â”‚   if isinstance(resp, ResponseBase):  # There may be a better way to test                                         â”‚           
                               â”‚   607 â”‚   â”‚   â”‚   return resp                                                                                                 â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/projects/python/check-cefet-refactor/app/infrastructure/http/class_uncherdule_resource.py:22 in post             â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   19 â”‚   â”‚   data = request.json                                                                                              â”‚           
                               â”‚   20 â”‚   â”‚   classSchedule = ClassSchedule(name=data['name'],                                                                 â”‚           
                               â”‚      start=datetime.fromisoformat(data['start']),                                                                             â”‚           
                               â”‚   21 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚     end=datetime.fromisoformat(data['start']))                                         â”‚           
                               â”‚ â± 22 â”‚   â”‚   self.service.save(classSchedule)                                                                                 â”‚           
                               â”‚   23 â”‚   â”‚   return {'message': 'class has  been created successfully.'}, 201                                                 â”‚           
                               â”‚   24                                                                                                                          â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/projects/python/check-cefet-refactor/app/domain/class_schedule/class_scherdule_service.py:20 in save             â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   17 â”‚   â”‚   return self.classRepository.findCurrentClass();                                                                  â”‚           
                               â”‚   18 â”‚                                                                                                                        â”‚           
                               â”‚   19 â”‚   def save(self, classScherdule):                                                                                      â”‚           
                               â”‚ â± 20 â”‚   â”‚   return self.classRepository.save(classScherdule)                                                                 â”‚           
                               â”‚   21                                                                                                                          â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/projects/python/check-cefet-refactor/app/infrastructure/database/class_repository.py:27 in save                  â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   24 â”‚   â”‚   self.logger.info(f"save new class with begin: {classSchedule.start} and end:                                     â”‚           
                               â”‚      {classSchedule.end} ğŸ§¾")                                                                                                 â”‚           
                               â”‚   25 â”‚   â”‚   pprint(classSchedule)                                                                                            â”‚           
                               â”‚   26 â”‚   â”‚                                                                                                                    â”‚           
                               â”‚ â± 27 â”‚   â”‚   self.mongo[settings.get("MONGO_DATABASE")[self.collection]].insertOne({'name' :                                  â”‚           
                               â”‚      classSchedule.name,                                                                                                      â”‚           
                               â”‚   28 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚      'end':                                    â”‚           
                               â”‚      classSchedule.end,                                                                                                       â”‚           
                               â”‚   29 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   'start':                                 â”‚           
                               â”‚      classSchedule.start                                                                                                      â”‚           
                               â”‚   30 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚      })                                        â”‚           
                               â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯           
                               TypeError: string indices must be integers, not 'str'                                                                                       
                      INFO     127.0.0.1 - - [24/Aug/2024 14:59:17] "[35m[1mPOST /class HTTP/1.1[0m" 500 -                                                  _internal.py:96
mongo mongodb://root:example@localhost:27017/
[2024/08/24 15:10;24] INFO     [Consumer:check-in-class] ğŸš©  Try connect in MQTT Server                                                           uncheck_user_broker.py:30
 * Debug mode: off
                      INFO     [Consumer:check-in-class] New client MQTT in broker.emqx.io:1883                                                   uncheck_user_broker.py:33
                      INFO     [Consumer:check-in-class] Subscribe in check-in-class ğŸ“ª                                                           uncheck_user_broker.py:44
CONNECTED IN MQTT SERVER:âœ”ï¸
mongo mongodb://root:example@localhost:27017/
[2024/08/24 15:35;07] INFO     [Consumer:check-in-class] ğŸš©  Try connect in MQTT Server                                                           uncheck_user_broker.py:30
 * Debug mode: off
                      INFO     [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server         _internal.py:96
                               instead.[0m                                                                                                                                 
                                * Running on http://127.0.0.1:5000                                                                                                         
                      INFO     [33mPress CTRL+C to quit[0m                                                                                                  _internal.py:96
                      INFO     [Consumer:check-in-class] New client MQTT in broker.emqx.io:1883                                                   uncheck_user_broker.py:33
                      INFO     [Consumer:check-in-class] Subscribe in check-in-class ğŸ“ª                                                           uncheck_user_broker.py:44
CONNECTED IN MQTT SERVER:âœ”ï¸
[2024/08/24 15:35;19] INFO     [Repository:class] save new class with begin: 2024-08-24 10:00:00 and end: 2024-08-24 10:00:00 ğŸ§¾                     class_repository.py:24
<app.domain.class_schedule.class_schedule.ClassSchedule object at 0x7fcdfa9589b0>
                      ERROR    Exception on /class [POST]                                                                                                        app.py:838
                               â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/flask/app.py:880 in full_dispatch_request              â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚    877 â”‚   â”‚   â”‚   request_started.send(self, _async_wrapper=self.ensure_sync)                                                â”‚           
                               â”‚    878 â”‚   â”‚   â”‚   rv = self.preprocess_request()                                                                             â”‚           
                               â”‚    879 â”‚   â”‚   â”‚   if rv is None:                                                                                             â”‚           
                               â”‚ â±  880 â”‚   â”‚   â”‚   â”‚   rv = self.dispatch_request()                                                                           â”‚           
                               â”‚    881 â”‚   â”‚   except Exception as e:                                                                                         â”‚           
                               â”‚    882 â”‚   â”‚   â”‚   rv = self.handle_user_exception(e)                                                                         â”‚           
                               â”‚    883 â”‚   â”‚   return self.finalize_request(rv)                                                                               â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/flask/app.py:865 in dispatch_request                   â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚    862 â”‚   â”‚   â”‚   return self.make_default_options_response()                                                                â”‚           
                               â”‚    863 â”‚   â”‚   # otherwise dispatch to the handler for that endpoint                                                          â”‚           
                               â”‚    864 â”‚   â”‚   view_args: dict[str, t.Any] = req.view_args  # type: ignore[assignment]                                        â”‚           
                               â”‚ â±  865 â”‚   â”‚   return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  #                                    â”‚           
                               â”‚        type: ignore[no-any-return]                                                                                            â”‚           
                               â”‚    866 â”‚                                                                                                                      â”‚           
                               â”‚    867 â”‚   def full_dispatch_request(self) -> Response:                                                                       â”‚           
                               â”‚    868 â”‚   â”‚   """Dispatches the request and on top of that performs request                                                  â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/flask_restful/__init__.py:489 in wrapper               â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   486 â”‚   â”‚   """                                                                                                             â”‚           
                               â”‚   487 â”‚   â”‚   @wraps(resource)                                                                                                â”‚           
                               â”‚   488 â”‚   â”‚   def wrapper(*args, **kwargs):                                                                                   â”‚           
                               â”‚ â± 489 â”‚   â”‚   â”‚   resp = resource(*args, **kwargs)                                                                            â”‚           
                               â”‚   490 â”‚   â”‚   â”‚   if isinstance(resp, ResponseBase):  # There may be a better way to test                                     â”‚           
                               â”‚   491 â”‚   â”‚   â”‚   â”‚   return resp                                                                                             â”‚           
                               â”‚   492 â”‚   â”‚   â”‚   data, code, headers = unpack(resp)                                                                          â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/flask/views.py:110 in view                             â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   107 â”‚   â”‚   â”‚   â”‚   self = view.view_class(  # type: ignore[attr-defined]                                                   â”‚           
                               â”‚   108 â”‚   â”‚   â”‚   â”‚   â”‚   *class_args, **class_kwargs                                                                         â”‚           
                               â”‚   109 â”‚   â”‚   â”‚   â”‚   )                                                                                                       â”‚           
                               â”‚ â± 110 â”‚   â”‚   â”‚   â”‚   return current_app.ensure_sync(self.dispatch_request)(**kwargs)  # type:                                â”‚           
                               â”‚       ignore[no-any-return]                                                                                                   â”‚           
                               â”‚   111 â”‚   â”‚                                                                                                                   â”‚           
                               â”‚   112 â”‚   â”‚   else:                                                                                                           â”‚           
                               â”‚   113 â”‚   â”‚   â”‚   self = cls(*class_args, **class_kwargs)                                                                     â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/flask_restful/__init__.py:604 in dispatch_request      â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   601 â”‚   â”‚   for decorator in decorators:                                                                                    â”‚           
                               â”‚   602 â”‚   â”‚   â”‚   meth = decorator(meth)                                                                                      â”‚           
                               â”‚   603 â”‚   â”‚                                                                                                                   â”‚           
                               â”‚ â± 604 â”‚   â”‚   resp = meth(*args, **kwargs)                                                                                    â”‚           
                               â”‚   605 â”‚   â”‚                                                                                                                   â”‚           
                               â”‚   606 â”‚   â”‚   if isinstance(resp, ResponseBase):  # There may be a better way to test                                         â”‚           
                               â”‚   607 â”‚   â”‚   â”‚   return resp                                                                                                 â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/projects/python/check-cefet-refactor/app/infrastructure/http/class_uncherdule_resource.py:22 in post             â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   19 â”‚   â”‚   data = request.json                                                                                              â”‚           
                               â”‚   20 â”‚   â”‚   classSchedule = ClassSchedule(name=data['name'],                                                                 â”‚           
                               â”‚      start=datetime.fromisoformat(data['start']),                                                                             â”‚           
                               â”‚   21 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚     end=datetime.fromisoformat(data['start']))                                         â”‚           
                               â”‚ â± 22 â”‚   â”‚   self.service.save(classSchedule)                                                                                 â”‚           
                               â”‚   23 â”‚   â”‚   return {'message': 'class has  been created successfully.'}, 201                                                 â”‚           
                               â”‚   24                                                                                                                          â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/projects/python/check-cefet-refactor/app/domain/class_schedule/class_scherdule_service.py:20 in save             â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   17 â”‚   â”‚   return self.classRepository.findCurrentClass();                                                                  â”‚           
                               â”‚   18 â”‚                                                                                                                        â”‚           
                               â”‚   19 â”‚   def save(self, classScherdule):                                                                                      â”‚           
                               â”‚ â± 20 â”‚   â”‚   return self.classRepository.save(classScherdule)                                                                 â”‚           
                               â”‚   21                                                                                                                          â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/projects/python/check-cefet-refactor/app/infrastructure/database/class_repository.py:27 in save                  â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   24 â”‚   â”‚   self.logger.info(f"save new class with begin: {classSchedule.start} and end:                                     â”‚           
                               â”‚      {classSchedule.end} ğŸ§¾")                                                                                                 â”‚           
                               â”‚   25 â”‚   â”‚   pprint(classSchedule)                                                                                            â”‚           
                               â”‚   26 â”‚   â”‚                                                                                                                    â”‚           
                               â”‚ â± 27 â”‚   â”‚   self.mongo[settings.get("MONGO_DATABASE")][self.collection].insert_one({                                         â”‚           
                               â”‚   28 â”‚   â”‚   â”‚   'name': classSchedule.name,                                                                                  â”‚           
                               â”‚   29 â”‚   â”‚   â”‚   'start': classSchedule.start,                                                                                â”‚           
                               â”‚   30 â”‚   â”‚   â”‚   'end': classSchedule,                                                                                        â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/pymongo/collection.py:669 in insert_one                â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚    666 â”‚   â”‚                                                                                                                  â”‚           
                               â”‚    667 â”‚   â”‚   write_concern = self._write_concern_for(session)                                                               â”‚           
                               â”‚    668 â”‚   â”‚   return InsertOneResult(                                                                                        â”‚           
                               â”‚ â±  669 â”‚   â”‚   â”‚   self._insert_one(                                                                                          â”‚           
                               â”‚    670 â”‚   â”‚   â”‚   â”‚   document,                                                                                              â”‚           
                               â”‚    671 â”‚   â”‚   â”‚   â”‚   ordered=True,                                                                                          â”‚           
                               â”‚    672 â”‚   â”‚   â”‚   â”‚   write_concern=write_concern,                                                                           â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/pymongo/collection.py:609 in _insert_one               â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚    606 â”‚   â”‚   â”‚                                                                                                              â”‚           
                               â”‚    607 â”‚   â”‚   â”‚   _check_write_command_response(result)                                                                      â”‚           
                               â”‚    608 â”‚   â”‚                                                                                                                  â”‚           
                               â”‚ â±  609 â”‚   â”‚   self.__database.client._retryable_write(acknowledged, _insert_command, session)                                â”‚           
                               â”‚    610 â”‚   â”‚                                                                                                                  â”‚           
                               â”‚    611 â”‚   â”‚   if not isinstance(doc, RawBSONDocument):                                                                       â”‚           
                               â”‚    612 â”‚   â”‚   â”‚   return doc.get("_id")                                                                                      â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/pymongo/mongo_client.py:1523 in _retryable_write       â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   1520 â”‚   â”‚     - `bulk`: bulk abstraction to execute operations in bulk, defaults to None                                   â”‚           
                               â”‚   1521 â”‚   â”‚   """                                                                                                            â”‚           
                               â”‚   1522 â”‚   â”‚   with self._tmp_session(session) as s:                                                                          â”‚           
                               â”‚ â± 1523 â”‚   â”‚   â”‚   return self._retry_with_session(retryable, func, s, bulk)                                                  â”‚           
                               â”‚   1524 â”‚                                                                                                                      â”‚           
                               â”‚   1525 â”‚   def __eq__(self, other: Any) -> bool:                                                                              â”‚           
                               â”‚   1526 â”‚   â”‚   if isinstance(other, self.__class__):                                                                          â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/pymongo/mongo_client.py:1421 in _retry_with_session    â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   1418 â”‚   â”‚   retryable = bool(                                                                                              â”‚           
                               â”‚   1419 â”‚   â”‚   â”‚   retryable and self.options.retry_writes and session and not                                                â”‚           
                               â”‚        session.in_transaction                                                                                                 â”‚           
                               â”‚   1420 â”‚   â”‚   )                                                                                                              â”‚           
                               â”‚ â± 1421 â”‚   â”‚   return self._retry_internal(                                                                                   â”‚           
                               â”‚   1422 â”‚   â”‚   â”‚   func=func,                                                                                                 â”‚           
                               â”‚   1423 â”‚   â”‚   â”‚   session=session,                                                                                           â”‚           
                               â”‚   1424 â”‚   â”‚   â”‚   bulk=bulk,                                                                                                 â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/pymongo/_csot.py:107 in csot_wrapper                   â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   104 â”‚   â”‚   â”‚   if timeout is not None:                                                                                     â”‚           
                               â”‚   105 â”‚   â”‚   â”‚   â”‚   with _TimeoutContext(timeout):                                                                          â”‚           
                               â”‚   106 â”‚   â”‚   â”‚   â”‚   â”‚   return func(self, *args, **kwargs)                                                                  â”‚           
                               â”‚ â± 107 â”‚   â”‚   return func(self, *args, **kwargs)                                                                              â”‚           
                               â”‚   108 â”‚                                                                                                                       â”‚           
                               â”‚   109 â”‚   return cast(F, csot_wrapper)                                                                                        â”‚           
                               â”‚   110                                                                                                                         â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/pymongo/mongo_client.py:1462 in _retry_internal        â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   1459 â”‚   â”‚   â”‚   read_pref=read_pref,                                                                                       â”‚           
                               â”‚   1460 â”‚   â”‚   â”‚   address=address,                                                                                           â”‚           
                               â”‚   1461 â”‚   â”‚   â”‚   retryable=retryable,                                                                                       â”‚           
                               â”‚ â± 1462 â”‚   â”‚   ).run()                                                                                                        â”‚           
                               â”‚   1463 â”‚                                                                                                                      â”‚           
                               â”‚   1464 â”‚   def _retryable_read(                                                                                               â”‚           
                               â”‚   1465 â”‚   â”‚   self,                                                                                                          â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/pymongo/mongo_client.py:2315 in run                    â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   2312 â”‚   â”‚   while True:                                                                                                    â”‚           
                               â”‚   2313 â”‚   â”‚   â”‚   self._check_last_error(check_csot=True)                                                                    â”‚           
                               â”‚   2314 â”‚   â”‚   â”‚   try:                                                                                                       â”‚           
                               â”‚ â± 2315 â”‚   â”‚   â”‚   â”‚   return self._read() if self._is_read else self._write()                                                â”‚           
                               â”‚   2316 â”‚   â”‚   â”‚   except ServerSelectionTimeoutError:                                                                        â”‚           
                               â”‚   2317 â”‚   â”‚   â”‚   â”‚   # The application may think the write was never attempted                                              â”‚           
                               â”‚   2318 â”‚   â”‚   â”‚   â”‚   # if we raise ServerSelectionTimeoutError on the retry                                                 â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/pymongo/mongo_client.py:2423 in _write                 â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   2420 â”‚   â”‚   â”‚   â”‚   â”‚   # not support sessions raise the last error.                                                       â”‚           
                               â”‚   2421 â”‚   â”‚   â”‚   â”‚   â”‚   self._check_last_error()                                                                           â”‚           
                               â”‚   2422 â”‚   â”‚   â”‚   â”‚   â”‚   self._retryable = False                                                                            â”‚           
                               â”‚ â± 2423 â”‚   â”‚   â”‚   â”‚   return self._func(self._session, conn, self._retryable)  # type: ignore                                â”‚           
                               â”‚   2424 â”‚   â”‚   except PyMongoError as exc:                                                                                    â”‚           
                               â”‚   2425 â”‚   â”‚   â”‚   if not self._retryable:                                                                                    â”‚           
                               â”‚   2426 â”‚   â”‚   â”‚   â”‚   raise                                                                                                  â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/pymongo/collection.py:597 in _insert_command           â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚    594 â”‚   â”‚   â”‚   if bypass_doc_val:                                                                                         â”‚           
                               â”‚    595 â”‚   â”‚   â”‚   â”‚   command["bypassDocumentValidation"] = True                                                             â”‚           
                               â”‚    596 â”‚   â”‚   â”‚                                                                                                              â”‚           
                               â”‚ â±  597 â”‚   â”‚   â”‚   result = conn.command(                                                                                     â”‚           
                               â”‚    598 â”‚   â”‚   â”‚   â”‚   self.__database.name,                                                                                  â”‚           
                               â”‚    599 â”‚   â”‚   â”‚   â”‚   command,                                                                                               â”‚           
                               â”‚    600 â”‚   â”‚   â”‚   â”‚   write_concern=write_concern,                                                                           â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/pymongo/helpers.py:322 in inner                        â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   319 â”‚   â”‚   from pymongo.pool import Connection                                                                             â”‚           
                               â”‚   320 â”‚   â”‚                                                                                                                   â”‚           
                               â”‚   321 â”‚   â”‚   try:                                                                                                            â”‚           
                               â”‚ â± 322 â”‚   â”‚   â”‚   return func(*args, **kwargs)                                                                                â”‚           
                               â”‚   323 â”‚   â”‚   except OperationFailure as exc:                                                                                 â”‚           
                               â”‚   324 â”‚   â”‚   â”‚   if no_reauth:                                                                                               â”‚           
                               â”‚   325 â”‚   â”‚   â”‚   â”‚   raise                                                                                                   â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/pymongo/pool.py:996 in command                         â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚    993 â”‚   â”‚   â”‚   raise                                                                                                      â”‚           
                               â”‚    994 â”‚   â”‚   # Catch socket.error, KeyboardInterrupt, etc. and close ourselves.                                             â”‚           
                               â”‚    995 â”‚   â”‚   except BaseException as error:                                                                                 â”‚           
                               â”‚ â±  996 â”‚   â”‚   â”‚   self._raise_connection_failure(error)                                                                      â”‚           
                               â”‚    997 â”‚                                                                                                                      â”‚           
                               â”‚    998 â”‚   def send_message(self, message: bytes, max_doc_size: int) -> None:                                                 â”‚           
                               â”‚    999 â”‚   â”‚   """Send a raw BSON message or raise ConnectionFailure.                                                         â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/pymongo/pool.py:968 in command                         â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚    965 â”‚   â”‚   if self.op_msg_enabled:                                                                                        â”‚           
                               â”‚    966 â”‚   â”‚   â”‚   self._raise_if_not_writable(unacknowledged)                                                                â”‚           
                               â”‚    967 â”‚   â”‚   try:                                                                                                           â”‚           
                               â”‚ â±  968 â”‚   â”‚   â”‚   return command(                                                                                            â”‚           
                               â”‚    969 â”‚   â”‚   â”‚   â”‚   self,                                                                                                  â”‚           
                               â”‚    970 â”‚   â”‚   â”‚   â”‚   dbname,                                                                                                â”‚           
                               â”‚    971 â”‚   â”‚   â”‚   â”‚   spec,                                                                                                  â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/pymongo/network.py:151 in command                      â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   148 â”‚   if use_op_msg:                                                                                                      â”‚           
                               â”‚   149 â”‚   â”‚   flags = _OpMsg.MORE_TO_COME if unacknowledged else 0                                                            â”‚           
                               â”‚   150 â”‚   â”‚   flags |= _OpMsg.EXHAUST_ALLOWED if exhaust_allowed else 0                                                       â”‚           
                               â”‚ â± 151 â”‚   â”‚   request_id, msg, size, max_doc_size = message._op_msg(                                                          â”‚           
                               â”‚   152 â”‚   â”‚   â”‚   flags, spec, dbname, read_preference, codec_options, ctx=compression_ctx                                    â”‚           
                               â”‚   153 â”‚   â”‚   )                                                                                                               â”‚           
                               â”‚   154 â”‚   â”‚   # If this is an unacknowledged write then make sure the encoded doc(s)                                          â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/pymongo/message.py:762 in _op_msg                      â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚    759 â”‚   try:                                                                                                               â”‚           
                               â”‚    760 â”‚   â”‚   if ctx:                                                                                                        â”‚           
                               â”‚    761 â”‚   â”‚   â”‚   return _op_msg_compressed(flags, command, identifier, docs, opts, ctx)                                     â”‚           
                               â”‚ â±  762 â”‚   â”‚   return _op_msg_uncompressed(flags, command, identifier, docs, opts)                                            â”‚           
                               â”‚    763 â”‚   finally:                                                                                                           â”‚           
                               â”‚    764 â”‚   â”‚   # Add the field back to the command.                                                                           â”‚           
                               â”‚    765 â”‚   â”‚   if identifier:                                                                                                 â”‚           
                               â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯           
                               InvalidDocument: cannot encode object: <app.domain.class_schedule.class_schedule.ClassSchedule object at 0x7fcdfa9589b0>, of                
                               type: <class 'app.domain.class_schedule.class_schedule.ClassSchedule'>                                                                      
[2024/08/24 15:35;20] INFO     127.0.0.1 - - [24/Aug/2024 15:35:20] "[35m[1mPOST /class HTTP/1.1[0m" 500 -                                                  _internal.py:96
mongo mongodb://root:example@localhost:27017/
[2024/08/24 15:38;31] INFO     [Consumer:check-in-class] ğŸš©  Try connect in MQTT Server                                                           uncheck_user_broker.py:30
 * Debug mode: off
                      INFO     [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server         _internal.py:96
                               instead.[0m                                                                                                                                 
                                * Running on http://127.0.0.1:5000                                                                                                         
                      INFO     [33mPress CTRL+C to quit[0m                                                                                                  _internal.py:96
                      INFO     [Consumer:check-in-class] New client MQTT in broker.emqx.io:1883                                                   uncheck_user_broker.py:33
                      INFO     [Consumer:check-in-class] Subscribe in check-in-class ğŸ“ª                                                           uncheck_user_broker.py:44
CONNECTED IN MQTT SERVER:âœ”ï¸
[2024/08/24 15:38;33] INFO     [Repository:class] save new class with begin: 2024-08-24 10:00:00 and end: 2024-08-24 10:00:00 ğŸ§¾                     class_repository.py:24
<app.domain.class_schedule.class_schedule.ClassSchedule object at 0x7fc6bc9f4aa0>
                      INFO     127.0.0.1 - - [24/Aug/2024 15:38:33] "[35m[1mPOST /class HTTP/1.1[0m" 201 -                                                  _internal.py:96
mongo mongodb://root:example@localhost:27017/
[2024/08/24 15:45;50] INFO     [Consumer:check-in-class] ğŸš©  Try connect in MQTT Server                                                           uncheck_user_broker.py:30
 * Debug mode: off
                      INFO     [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server         _internal.py:96
                               instead.[0m                                                                                                                                 
                                * Running on http://127.0.0.1:5000                                                                                                         
                      INFO     [33mPress CTRL+C to quit[0m                                                                                                  _internal.py:96
                      INFO     [Consumer:check-in-class] New client MQTT in broker.emqx.io:1883                                                   uncheck_user_broker.py:33
                      INFO     [Consumer:check-in-class] Subscribe in check-in-class ğŸ“ª                                                           uncheck_user_broker.py:44
CONNECTED IN MQTT SERVER:âœ”ï¸
[2024/08/24 15:45;59] INFO     [Repository:class] save new class with begin: 2024-08-24 10:00:00 and end: 2024-08-24 10:00:00 ğŸ§¾                     class_repository.py:24
<app.domain.class_schedule.class_schedule.ClassSchedule object at 0x7ff50e888bc0>
                      INFO     127.0.0.1 - - [24/Aug/2024 15:45:59] "[35m[1mPOST /class HTTP/1.1[0m" 201 -                                                  _internal.py:96
mongo mongodb://root:example@localhost:27017/
[2024/08/24 17:02;49] INFO     [Consumer:check-in-class] ğŸš©  Try connect in MQTT Server                                                           uncheck_user_broker.py:31
 * Debug mode: off
                      INFO     [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server         _internal.py:96
                               instead.[0m                                                                                                                                 
                                * Running on http://127.0.0.1:5000                                                                                                         
                      INFO     [33mPress CTRL+C to quit[0m                                                                                                  _internal.py:96
[2024/08/24 17:02;50] INFO     [Consumer:check-in-class] New client MQTT in broker.emqx.io:1883                                                   uncheck_user_broker.py:34
                      INFO     [Consumer:check-in-class] Subscribe in check-in-class ğŸ“ª                                                           uncheck_user_broker.py:45
CONNECTED IN MQTT SERVER:âœ”ï¸
[2024/08/24 17:03;48] INFO     [Service:StudyService] Linked study: Marcos with deviceId: None ğŸ“                                                       study_service.py:17
                      INFO     [Repository:uncheck] save new uncheck user with deviceId: <app.domain.uncheck_user.uncheck_user.UncheckUser object  uncheck_repository.py:28
                               at 0x7f6117e13920> ğŸ“²                                                                                                                       
                      ERROR    Exception on /user [POST]                                                                                                         app.py:838
                               â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/flask/app.py:880 in full_dispatch_request              â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚    877 â”‚   â”‚   â”‚   request_started.send(self, _async_wrapper=self.ensure_sync)                                                â”‚           
                               â”‚    878 â”‚   â”‚   â”‚   rv = self.preprocess_request()                                                                             â”‚           
                               â”‚    879 â”‚   â”‚   â”‚   if rv is None:                                                                                             â”‚           
                               â”‚ â±  880 â”‚   â”‚   â”‚   â”‚   rv = self.dispatch_request()                                                                           â”‚           
                               â”‚    881 â”‚   â”‚   except Exception as e:                                                                                         â”‚           
                               â”‚    882 â”‚   â”‚   â”‚   rv = self.handle_user_exception(e)                                                                         â”‚           
                               â”‚    883 â”‚   â”‚   return self.finalize_request(rv)                                                                               â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/flask/app.py:865 in dispatch_request                   â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚    862 â”‚   â”‚   â”‚   return self.make_default_options_response()                                                                â”‚           
                               â”‚    863 â”‚   â”‚   # otherwise dispatch to the handler for that endpoint                                                          â”‚           
                               â”‚    864 â”‚   â”‚   view_args: dict[str, t.Any] = req.view_args  # type: ignore[assignment]                                        â”‚           
                               â”‚ â±  865 â”‚   â”‚   return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  #                                    â”‚           
                               â”‚        type: ignore[no-any-return]                                                                                            â”‚           
                               â”‚    866 â”‚                                                                                                                      â”‚           
                               â”‚    867 â”‚   def full_dispatch_request(self) -> Response:                                                                       â”‚           
                               â”‚    868 â”‚   â”‚   """Dispatches the request and on top of that performs request                                                  â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/flask_restful/__init__.py:489 in wrapper               â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   486 â”‚   â”‚   """                                                                                                             â”‚           
                               â”‚   487 â”‚   â”‚   @wraps(resource)                                                                                                â”‚           
                               â”‚   488 â”‚   â”‚   def wrapper(*args, **kwargs):                                                                                   â”‚           
                               â”‚ â± 489 â”‚   â”‚   â”‚   resp = resource(*args, **kwargs)                                                                            â”‚           
                               â”‚   490 â”‚   â”‚   â”‚   if isinstance(resp, ResponseBase):  # There may be a better way to test                                     â”‚           
                               â”‚   491 â”‚   â”‚   â”‚   â”‚   return resp                                                                                             â”‚           
                               â”‚   492 â”‚   â”‚   â”‚   data, code, headers = unpack(resp)                                                                          â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/flask/views.py:110 in view                             â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   107 â”‚   â”‚   â”‚   â”‚   self = view.view_class(  # type: ignore[attr-defined]                                                   â”‚           
                               â”‚   108 â”‚   â”‚   â”‚   â”‚   â”‚   *class_args, **class_kwargs                                                                         â”‚           
                               â”‚   109 â”‚   â”‚   â”‚   â”‚   )                                                                                                       â”‚           
                               â”‚ â± 110 â”‚   â”‚   â”‚   â”‚   return current_app.ensure_sync(self.dispatch_request)(**kwargs)  # type:                                â”‚           
                               â”‚       ignore[no-any-return]                                                                                                   â”‚           
                               â”‚   111 â”‚   â”‚                                                                                                                   â”‚           
                               â”‚   112 â”‚   â”‚   else:                                                                                                           â”‚           
                               â”‚   113 â”‚   â”‚   â”‚   self = cls(*class_args, **class_kwargs)                                                                     â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/flask_restful/__init__.py:604 in dispatch_request      â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   601 â”‚   â”‚   for decorator in decorators:                                                                                    â”‚           
                               â”‚   602 â”‚   â”‚   â”‚   meth = decorator(meth)                                                                                      â”‚           
                               â”‚   603 â”‚   â”‚                                                                                                                   â”‚           
                               â”‚ â± 604 â”‚   â”‚   resp = meth(*args, **kwargs)                                                                                    â”‚           
                               â”‚   605 â”‚   â”‚                                                                                                                   â”‚           
                               â”‚   606 â”‚   â”‚   if isinstance(resp, ResponseBase):  # There may be a better way to test                                         â”‚           
                               â”‚   607 â”‚   â”‚   â”‚   return resp                                                                                                 â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/projects/python/check-cefet-refactor/app/infrastructure/http/study_resource.py:18 in post                        â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   15 â”‚   def post(self):                                                                                                      â”‚           
                               â”‚   16 â”‚   â”‚   data = request.json                                                                                              â”‚           
                               â”‚   17 â”‚   â”‚   study = Study(data['uncheck-user-id'] ,data['name'], data['code'])                                               â”‚           
                               â”‚ â± 18 â”‚   â”‚   self.service.save(study)                                                                                         â”‚           
                               â”‚   19 â”‚   â”‚   return {'message': 'message has been created successfully.'}, 201                                                â”‚           
                               â”‚   20                                                                                                                          â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/projects/python/check-cefet-refactor/app/domain/study/study_service.py:20 in save                                â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   17 â”‚   â”‚   self.logger.info(f"Linked study: {study.name} with deviceId: {uncheck.deviceId}                                  â”‚           
                               â”‚      ğŸ“")                                                                                                                     â”‚           
                               â”‚   18 â”‚   â”‚   self.repository.save(study)                                                                                      â”‚           
                               â”‚   19 â”‚   â”‚   uncheck.linked = True                                                                                            â”‚           
                               â”‚ â± 20 â”‚   â”‚   self.uncheckUserService.save(uncheck)                                                                            â”‚           
                               â”‚   21 â”‚                                                                                                                        â”‚           
                               â”‚   22 â”‚   def find_user_by_uncheck_id(self, unId):                                                                             â”‚           
                               â”‚   23 â”‚   â”‚   self.repository.find_user_by_uncheck_id(unId)                                                                    â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/projects/python/check-cefet-refactor/app/domain/uncheck_user/uncheck_user_service.py:12 in save                  â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚    9 â”‚   â”‚   self.repository = repository                                                                                     â”‚           
                               â”‚   10 â”‚                                                                                                                        â”‚           
                               â”‚   11 â”‚   def save(self, deviceId):                                                                                            â”‚           
                               â”‚ â± 12 â”‚   â”‚   self.repository.save(UncheckUser(deviceId))                                                                      â”‚           
                               â”‚   13 â”‚                                                                                                                        â”‚           
                               â”‚   14 â”‚   def find_one(self, id) -> Optional[UncheckUser]:                                                                     â”‚           
                               â”‚   15 â”‚   â”‚   return self.repository.find_one(id)                                                                              â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/projects/python/check-cefet-refactor/app/infrastructure/database/uncheck_repository.py:29 in save                â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   26 â”‚                                                                                                                        â”‚           
                               â”‚   27 â”‚   def save(self, uncheck : UncheckUser):                                                                               â”‚           
                               â”‚   28 â”‚   â”‚   self.logger.info(f"save new uncheck user with deviceId: {uncheck.deviceId} ğŸ“²")                                  â”‚           
                               â”‚ â± 29 â”‚   â”‚   return                                                                                                           â”‚           
                               â”‚      self.mongo[settings.get("MONGO_DATABASE")][self.collection].insert_one({"deviceId":unche                                 â”‚           
                               â”‚      ck.deviceId})                                                                                                            â”‚           
                               â”‚   30                                                                                                                          â”‚           
                               â”‚   31                                                                                                                          â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/pymongo/collection.py:669 in insert_one                â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚    666 â”‚   â”‚                                                                                                                  â”‚           
                               â”‚    667 â”‚   â”‚   write_concern = self._write_concern_for(session)                                                               â”‚           
                               â”‚    668 â”‚   â”‚   return InsertOneResult(                                                                                        â”‚           
                               â”‚ â±  669 â”‚   â”‚   â”‚   self._insert_one(                                                                                          â”‚           
                               â”‚    670 â”‚   â”‚   â”‚   â”‚   document,                                                                                              â”‚           
                               â”‚    671 â”‚   â”‚   â”‚   â”‚   ordered=True,                                                                                          â”‚           
                               â”‚    672 â”‚   â”‚   â”‚   â”‚   write_concern=write_concern,                                                                           â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/pymongo/collection.py:609 in _insert_one               â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚    606 â”‚   â”‚   â”‚                                                                                                              â”‚           
                               â”‚    607 â”‚   â”‚   â”‚   _check_write_command_response(result)                                                                      â”‚           
                               â”‚    608 â”‚   â”‚                                                                                                                  â”‚           
                               â”‚ â±  609 â”‚   â”‚   self.__database.client._retryable_write(acknowledged, _insert_command, session)                                â”‚           
                               â”‚    610 â”‚   â”‚                                                                                                                  â”‚           
                               â”‚    611 â”‚   â”‚   if not isinstance(doc, RawBSONDocument):                                                                       â”‚           
                               â”‚    612 â”‚   â”‚   â”‚   return doc.get("_id")                                                                                      â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/pymongo/mongo_client.py:1523 in _retryable_write       â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   1520 â”‚   â”‚     - `bulk`: bulk abstraction to execute operations in bulk, defaults to None                                   â”‚           
                               â”‚   1521 â”‚   â”‚   """                                                                                                            â”‚           
                               â”‚   1522 â”‚   â”‚   with self._tmp_session(session) as s:                                                                          â”‚           
                               â”‚ â± 1523 â”‚   â”‚   â”‚   return self._retry_with_session(retryable, func, s, bulk)                                                  â”‚           
                               â”‚   1524 â”‚                                                                                                                      â”‚           
                               â”‚   1525 â”‚   def __eq__(self, other: Any) -> bool:                                                                              â”‚           
                               â”‚   1526 â”‚   â”‚   if isinstance(other, self.__class__):                                                                          â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/pymongo/mongo_client.py:1421 in _retry_with_session    â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   1418 â”‚   â”‚   retryable = bool(                                                                                              â”‚           
                               â”‚   1419 â”‚   â”‚   â”‚   retryable and self.options.retry_writes and session and not                                                â”‚           
                               â”‚        session.in_transaction                                                                                                 â”‚           
                               â”‚   1420 â”‚   â”‚   )                                                                                                              â”‚           
                               â”‚ â± 1421 â”‚   â”‚   return self._retry_internal(                                                                                   â”‚           
                               â”‚   1422 â”‚   â”‚   â”‚   func=func,                                                                                                 â”‚           
                               â”‚   1423 â”‚   â”‚   â”‚   session=session,                                                                                           â”‚           
                               â”‚   1424 â”‚   â”‚   â”‚   bulk=bulk,                                                                                                 â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/pymongo/_csot.py:107 in csot_wrapper                   â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   104 â”‚   â”‚   â”‚   if timeout is not None:                                                                                     â”‚           
                               â”‚   105 â”‚   â”‚   â”‚   â”‚   with _TimeoutContext(timeout):                                                                          â”‚           
                               â”‚   106 â”‚   â”‚   â”‚   â”‚   â”‚   return func(self, *args, **kwargs)                                                                  â”‚           
                               â”‚ â± 107 â”‚   â”‚   return func(self, *args, **kwargs)                                                                              â”‚           
                               â”‚   108 â”‚                                                                                                                       â”‚           
                               â”‚   109 â”‚   return cast(F, csot_wrapper)                                                                                        â”‚           
                               â”‚   110                                                                                                                         â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/pymongo/mongo_client.py:1462 in _retry_internal        â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   1459 â”‚   â”‚   â”‚   read_pref=read_pref,                                                                                       â”‚           
                               â”‚   1460 â”‚   â”‚   â”‚   address=address,                                                                                           â”‚           
                               â”‚   1461 â”‚   â”‚   â”‚   retryable=retryable,                                                                                       â”‚           
                               â”‚ â± 1462 â”‚   â”‚   ).run()                                                                                                        â”‚           
                               â”‚   1463 â”‚                                                                                                                      â”‚           
                               â”‚   1464 â”‚   def _retryable_read(                                                                                               â”‚           
                               â”‚   1465 â”‚   â”‚   self,                                                                                                          â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/pymongo/mongo_client.py:2315 in run                    â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   2312 â”‚   â”‚   while True:                                                                                                    â”‚           
                               â”‚   2313 â”‚   â”‚   â”‚   self._check_last_error(check_csot=True)                                                                    â”‚           
                               â”‚   2314 â”‚   â”‚   â”‚   try:                                                                                                       â”‚           
                               â”‚ â± 2315 â”‚   â”‚   â”‚   â”‚   return self._read() if self._is_read else self._write()                                                â”‚           
                               â”‚   2316 â”‚   â”‚   â”‚   except ServerSelectionTimeoutError:                                                                        â”‚           
                               â”‚   2317 â”‚   â”‚   â”‚   â”‚   # The application may think the write was never attempted                                              â”‚           
                               â”‚   2318 â”‚   â”‚   â”‚   â”‚   # if we raise ServerSelectionTimeoutError on the retry                                                 â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/pymongo/mongo_client.py:2423 in _write                 â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   2420 â”‚   â”‚   â”‚   â”‚   â”‚   # not support sessions raise the last error.                                                       â”‚           
                               â”‚   2421 â”‚   â”‚   â”‚   â”‚   â”‚   self._check_last_error()                                                                           â”‚           
                               â”‚   2422 â”‚   â”‚   â”‚   â”‚   â”‚   self._retryable = False                                                                            â”‚           
                               â”‚ â± 2423 â”‚   â”‚   â”‚   â”‚   return self._func(self._session, conn, self._retryable)  # type: ignore                                â”‚           
                               â”‚   2424 â”‚   â”‚   except PyMongoError as exc:                                                                                    â”‚           
                               â”‚   2425 â”‚   â”‚   â”‚   if not self._retryable:                                                                                    â”‚           
                               â”‚   2426 â”‚   â”‚   â”‚   â”‚   raise                                                                                                  â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/pymongo/collection.py:597 in _insert_command           â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚    594 â”‚   â”‚   â”‚   if bypass_doc_val:                                                                                         â”‚           
                               â”‚    595 â”‚   â”‚   â”‚   â”‚   command["bypassDocumentValidation"] = True                                                             â”‚           
                               â”‚    596 â”‚   â”‚   â”‚                                                                                                              â”‚           
                               â”‚ â±  597 â”‚   â”‚   â”‚   result = conn.command(                                                                                     â”‚           
                               â”‚    598 â”‚   â”‚   â”‚   â”‚   self.__database.name,                                                                                  â”‚           
                               â”‚    599 â”‚   â”‚   â”‚   â”‚   command,                                                                                               â”‚           
                               â”‚    600 â”‚   â”‚   â”‚   â”‚   write_concern=write_concern,                                                                           â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/pymongo/helpers.py:322 in inner                        â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   319 â”‚   â”‚   from pymongo.pool import Connection                                                                             â”‚           
                               â”‚   320 â”‚   â”‚                                                                                                                   â”‚           
                               â”‚   321 â”‚   â”‚   try:                                                                                                            â”‚           
                               â”‚ â± 322 â”‚   â”‚   â”‚   return func(*args, **kwargs)                                                                                â”‚           
                               â”‚   323 â”‚   â”‚   except OperationFailure as exc:                                                                                 â”‚           
                               â”‚   324 â”‚   â”‚   â”‚   if no_reauth:                                                                                               â”‚           
                               â”‚   325 â”‚   â”‚   â”‚   â”‚   raise                                                                                                   â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/pymongo/pool.py:996 in command                         â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚    993 â”‚   â”‚   â”‚   raise                                                                                                      â”‚           
                               â”‚    994 â”‚   â”‚   # Catch socket.error, KeyboardInterrupt, etc. and close ourselves.                                             â”‚           
                               â”‚    995 â”‚   â”‚   except BaseException as error:                                                                                 â”‚           
                               â”‚ â±  996 â”‚   â”‚   â”‚   self._raise_connection_failure(error)                                                                      â”‚           
                               â”‚    997 â”‚                                                                                                                      â”‚           
                               â”‚    998 â”‚   def send_message(self, message: bytes, max_doc_size: int) -> None:                                                 â”‚           
                               â”‚    999 â”‚   â”‚   """Send a raw BSON message or raise ConnectionFailure.                                                         â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/pymongo/pool.py:968 in command                         â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚    965 â”‚   â”‚   if self.op_msg_enabled:                                                                                        â”‚           
                               â”‚    966 â”‚   â”‚   â”‚   self._raise_if_not_writable(unacknowledged)                                                                â”‚           
                               â”‚    967 â”‚   â”‚   try:                                                                                                           â”‚           
                               â”‚ â±  968 â”‚   â”‚   â”‚   return command(                                                                                            â”‚           
                               â”‚    969 â”‚   â”‚   â”‚   â”‚   self,                                                                                                  â”‚           
                               â”‚    970 â”‚   â”‚   â”‚   â”‚   dbname,                                                                                                â”‚           
                               â”‚    971 â”‚   â”‚   â”‚   â”‚   spec,                                                                                                  â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/pymongo/network.py:151 in command                      â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   148 â”‚   if use_op_msg:                                                                                                      â”‚           
                               â”‚   149 â”‚   â”‚   flags = _OpMsg.MORE_TO_COME if unacknowledged else 0                                                            â”‚           
                               â”‚   150 â”‚   â”‚   flags |= _OpMsg.EXHAUST_ALLOWED if exhaust_allowed else 0                                                       â”‚           
                               â”‚ â± 151 â”‚   â”‚   request_id, msg, size, max_doc_size = message._op_msg(                                                          â”‚           
                               â”‚   152 â”‚   â”‚   â”‚   flags, spec, dbname, read_preference, codec_options, ctx=compression_ctx                                    â”‚           
                               â”‚   153 â”‚   â”‚   )                                                                                                               â”‚           
                               â”‚   154 â”‚   â”‚   # If this is an unacknowledged write then make sure the encoded doc(s)                                          â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/pymongo/message.py:762 in _op_msg                      â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚    759 â”‚   try:                                                                                                               â”‚           
                               â”‚    760 â”‚   â”‚   if ctx:                                                                                                        â”‚           
                               â”‚    761 â”‚   â”‚   â”‚   return _op_msg_compressed(flags, command, identifier, docs, opts, ctx)                                     â”‚           
                               â”‚ â±  762 â”‚   â”‚   return _op_msg_uncompressed(flags, command, identifier, docs, opts)                                            â”‚           
                               â”‚    763 â”‚   finally:                                                                                                           â”‚           
                               â”‚    764 â”‚   â”‚   # Add the field back to the command.                                                                           â”‚           
                               â”‚    765 â”‚   â”‚   if identifier:                                                                                                 â”‚           
                               â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯           
                               InvalidDocument: cannot encode object: <app.domain.uncheck_user.uncheck_user.UncheckUser object at 0x7f6117e13920>, of type:                
                               <class 'app.domain.uncheck_user.uncheck_user.UncheckUser'>                                                                                  
[2024/08/24 17:03;49] INFO     127.0.0.1 - - [24/Aug/2024 17:03:49] "[35m[1mPOST /user HTTP/1.1[0m" 500 -                                                   _internal.py:96
mongo mongodb://root:example@localhost:27017/
[2024/08/24 17:10;21] INFO     [Consumer:check-in-class] ğŸš©  Try connect in MQTT Server                                                           uncheck_user_broker.py:31
 * Debug mode: off
                      INFO     [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server         _internal.py:96
                               instead.[0m                                                                                                                                 
                                * Running on http://127.0.0.1:5000                                                                                                         
                      INFO     [33mPress CTRL+C to quit[0m                                                                                                  _internal.py:96
                      INFO     [Consumer:check-in-class] New client MQTT in broker.emqx.io:1883                                                   uncheck_user_broker.py:34
                      INFO     [Consumer:check-in-class] Subscribe in check-in-class ğŸ“ª                                                           uncheck_user_broker.py:45
CONNECTED IN MQTT SERVER:âœ”ï¸
mongo mongodb://root:example@localhost:27017/
[2024/08/24 17:11;10] INFO     [Consumer:check-in-class] ğŸš©  Try connect in MQTT Server                                                           uncheck_user_broker.py:31
 * Debug mode: off
                      INFO     [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server         _internal.py:96
                               instead.[0m                                                                                                                                 
                                * Running on http://127.0.0.1:5000                                                                                                         
                      INFO     [33mPress CTRL+C to quit[0m                                                                                                  _internal.py:96
                      INFO     [Consumer:check-in-class] New client MQTT in broker.emqx.io:1883                                                   uncheck_user_broker.py:34
                      INFO     [Consumer:check-in-class] Subscribe in check-in-class ğŸ“ª                                                           uncheck_user_broker.py:45
CONNECTED IN MQTT SERVER:âœ”ï¸
[2024/08/24 17:11;14] INFO     [Service:StudyService] Linked study: Marcos with deviceId: None ğŸ“                                                       study_service.py:17
                      ERROR    Exception on /user [POST]                                                                                                         app.py:838
                               â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/flask/app.py:880 in full_dispatch_request              â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚    877 â”‚   â”‚   â”‚   request_started.send(self, _async_wrapper=self.ensure_sync)                                                â”‚           
                               â”‚    878 â”‚   â”‚   â”‚   rv = self.preprocess_request()                                                                             â”‚           
                               â”‚    879 â”‚   â”‚   â”‚   if rv is None:                                                                                             â”‚           
                               â”‚ â±  880 â”‚   â”‚   â”‚   â”‚   rv = self.dispatch_request()                                                                           â”‚           
                               â”‚    881 â”‚   â”‚   except Exception as e:                                                                                         â”‚           
                               â”‚    882 â”‚   â”‚   â”‚   rv = self.handle_user_exception(e)                                                                         â”‚           
                               â”‚    883 â”‚   â”‚   return self.finalize_request(rv)                                                                               â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/flask/app.py:865 in dispatch_request                   â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚    862 â”‚   â”‚   â”‚   return self.make_default_options_response()                                                                â”‚           
                               â”‚    863 â”‚   â”‚   # otherwise dispatch to the handler for that endpoint                                                          â”‚           
                               â”‚    864 â”‚   â”‚   view_args: dict[str, t.Any] = req.view_args  # type: ignore[assignment]                                        â”‚           
                               â”‚ â±  865 â”‚   â”‚   return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  #                                    â”‚           
                               â”‚        type: ignore[no-any-return]                                                                                            â”‚           
                               â”‚    866 â”‚                                                                                                                      â”‚           
                               â”‚    867 â”‚   def full_dispatch_request(self) -> Response:                                                                       â”‚           
                               â”‚    868 â”‚   â”‚   """Dispatches the request and on top of that performs request                                                  â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/flask_restful/__init__.py:489 in wrapper               â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   486 â”‚   â”‚   """                                                                                                             â”‚           
                               â”‚   487 â”‚   â”‚   @wraps(resource)                                                                                                â”‚           
                               â”‚   488 â”‚   â”‚   def wrapper(*args, **kwargs):                                                                                   â”‚           
                               â”‚ â± 489 â”‚   â”‚   â”‚   resp = resource(*args, **kwargs)                                                                            â”‚           
                               â”‚   490 â”‚   â”‚   â”‚   if isinstance(resp, ResponseBase):  # There may be a better way to test                                     â”‚           
                               â”‚   491 â”‚   â”‚   â”‚   â”‚   return resp                                                                                             â”‚           
                               â”‚   492 â”‚   â”‚   â”‚   data, code, headers = unpack(resp)                                                                          â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/flask/views.py:110 in view                             â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   107 â”‚   â”‚   â”‚   â”‚   self = view.view_class(  # type: ignore[attr-defined]                                                   â”‚           
                               â”‚   108 â”‚   â”‚   â”‚   â”‚   â”‚   *class_args, **class_kwargs                                                                         â”‚           
                               â”‚   109 â”‚   â”‚   â”‚   â”‚   )                                                                                                       â”‚           
                               â”‚ â± 110 â”‚   â”‚   â”‚   â”‚   return current_app.ensure_sync(self.dispatch_request)(**kwargs)  # type:                                â”‚           
                               â”‚       ignore[no-any-return]                                                                                                   â”‚           
                               â”‚   111 â”‚   â”‚                                                                                                                   â”‚           
                               â”‚   112 â”‚   â”‚   else:                                                                                                           â”‚           
                               â”‚   113 â”‚   â”‚   â”‚   self = cls(*class_args, **class_kwargs)                                                                     â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/flask_restful/__init__.py:604 in dispatch_request      â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   601 â”‚   â”‚   for decorator in decorators:                                                                                    â”‚           
                               â”‚   602 â”‚   â”‚   â”‚   meth = decorator(meth)                                                                                      â”‚           
                               â”‚   603 â”‚   â”‚                                                                                                                   â”‚           
                               â”‚ â± 604 â”‚   â”‚   resp = meth(*args, **kwargs)                                                                                    â”‚           
                               â”‚   605 â”‚   â”‚                                                                                                                   â”‚           
                               â”‚   606 â”‚   â”‚   if isinstance(resp, ResponseBase):  # There may be a better way to test                                         â”‚           
                               â”‚   607 â”‚   â”‚   â”‚   return resp                                                                                                 â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/projects/python/check-cefet-refactor/app/infrastructure/http/study_resource.py:18 in post                        â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   15 â”‚   def post(self):                                                                                                      â”‚           
                               â”‚   16 â”‚   â”‚   data = request.json                                                                                              â”‚           
                               â”‚   17 â”‚   â”‚   study = Study(data['uncheck-user-id'] ,data['name'], data['code'])                                               â”‚           
                               â”‚ â± 18 â”‚   â”‚   self.service.save(study)                                                                                         â”‚           
                               â”‚   19 â”‚   â”‚   return {'message': 'message has been created successfully.'}, 201                                                â”‚           
                               â”‚   20                                                                                                                          â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/projects/python/check-cefet-refactor/app/domain/study/study_service.py:20 in save                                â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   17 â”‚   â”‚   self.logger.info(f"Linked study: {study.name} with deviceId: {uncheck.deviceId}                                  â”‚           
                               â”‚      ğŸ“")                                                                                                                     â”‚           
                               â”‚   18 â”‚   â”‚   self.repository.save(study)                                                                                      â”‚           
                               â”‚   19 â”‚   â”‚   uncheck.linked = True                                                                                            â”‚           
                               â”‚ â± 20 â”‚   â”‚   self.uncheckUserService.update(uncheck)                                                                          â”‚           
                               â”‚   21 â”‚                                                                                                                        â”‚           
                               â”‚   22 â”‚   def find_user_by_uncheck_id(self, unId):                                                                             â”‚           
                               â”‚   23 â”‚   â”‚   self.repository.find_user_by_uncheck_id(unId)                                                                    â”‚           
                               â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯           
                               AttributeError: 'UncheckUserService' object has no attribute 'update'                                                                       
                      INFO     127.0.0.1 - - [24/Aug/2024 17:11:14] "[35m[1mPOST /user HTTP/1.1[0m" 500 -                                                   _internal.py:96
mongo mongodb://root:example@localhost:27017/
[2024/08/24 17:12;07] INFO     [Consumer:check-in-class] ğŸš©  Try connect in MQTT Server                                                           uncheck_user_broker.py:31
 * Debug mode: off
                      INFO     [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server         _internal.py:96
                               instead.[0m                                                                                                                                 
                                * Running on http://127.0.0.1:5000                                                                                                         
                      INFO     [33mPress CTRL+C to quit[0m                                                                                                  _internal.py:96
                      INFO     [Consumer:check-in-class] New client MQTT in broker.emqx.io:1883                                                   uncheck_user_broker.py:34
                      INFO     [Consumer:check-in-class] Subscribe in check-in-class ğŸ“ª                                                           uncheck_user_broker.py:45
CONNECTED IN MQTT SERVER:âœ”ï¸
[2024/08/24 17:12;08] INFO     [Service:StudyService] Linked study: Marcos with deviceId: None ğŸ“                                                       study_service.py:17
                      INFO     [Repository:uncheck] Update uncheck user with deviceId: None ğŸ“²                                                     uncheck_repository.py:28
                      ERROR    Exception on /user [POST]                                                                                                         app.py:838
                               â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/flask/app.py:880 in full_dispatch_request              â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚    877 â”‚   â”‚   â”‚   request_started.send(self, _async_wrapper=self.ensure_sync)                                                â”‚           
                               â”‚    878 â”‚   â”‚   â”‚   rv = self.preprocess_request()                                                                             â”‚           
                               â”‚    879 â”‚   â”‚   â”‚   if rv is None:                                                                                             â”‚           
                               â”‚ â±  880 â”‚   â”‚   â”‚   â”‚   rv = self.dispatch_request()                                                                           â”‚           
                               â”‚    881 â”‚   â”‚   except Exception as e:                                                                                         â”‚           
                               â”‚    882 â”‚   â”‚   â”‚   rv = self.handle_user_exception(e)                                                                         â”‚           
                               â”‚    883 â”‚   â”‚   return self.finalize_request(rv)                                                                               â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/flask/app.py:865 in dispatch_request                   â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚    862 â”‚   â”‚   â”‚   return self.make_default_options_response()                                                                â”‚           
                               â”‚    863 â”‚   â”‚   # otherwise dispatch to the handler for that endpoint                                                          â”‚           
                               â”‚    864 â”‚   â”‚   view_args: dict[str, t.Any] = req.view_args  # type: ignore[assignment]                                        â”‚           
                               â”‚ â±  865 â”‚   â”‚   return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  #                                    â”‚           
                               â”‚        type: ignore[no-any-return]                                                                                            â”‚           
                               â”‚    866 â”‚                                                                                                                      â”‚           
                               â”‚    867 â”‚   def full_dispatch_request(self) -> Response:                                                                       â”‚           
                               â”‚    868 â”‚   â”‚   """Dispatches the request and on top of that performs request                                                  â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/flask_restful/__init__.py:489 in wrapper               â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   486 â”‚   â”‚   """                                                                                                             â”‚           
                               â”‚   487 â”‚   â”‚   @wraps(resource)                                                                                                â”‚           
                               â”‚   488 â”‚   â”‚   def wrapper(*args, **kwargs):                                                                                   â”‚           
                               â”‚ â± 489 â”‚   â”‚   â”‚   resp = resource(*args, **kwargs)                                                                            â”‚           
                               â”‚   490 â”‚   â”‚   â”‚   if isinstance(resp, ResponseBase):  # There may be a better way to test                                     â”‚           
                               â”‚   491 â”‚   â”‚   â”‚   â”‚   return resp                                                                                             â”‚           
                               â”‚   492 â”‚   â”‚   â”‚   data, code, headers = unpack(resp)                                                                          â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/flask/views.py:110 in view                             â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   107 â”‚   â”‚   â”‚   â”‚   self = view.view_class(  # type: ignore[attr-defined]                                                   â”‚           
                               â”‚   108 â”‚   â”‚   â”‚   â”‚   â”‚   *class_args, **class_kwargs                                                                         â”‚           
                               â”‚   109 â”‚   â”‚   â”‚   â”‚   )                                                                                                       â”‚           
                               â”‚ â± 110 â”‚   â”‚   â”‚   â”‚   return current_app.ensure_sync(self.dispatch_request)(**kwargs)  # type:                                â”‚           
                               â”‚       ignore[no-any-return]                                                                                                   â”‚           
                               â”‚   111 â”‚   â”‚                                                                                                                   â”‚           
                               â”‚   112 â”‚   â”‚   else:                                                                                                           â”‚           
                               â”‚   113 â”‚   â”‚   â”‚   self = cls(*class_args, **class_kwargs)                                                                     â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/flask_restful/__init__.py:604 in dispatch_request      â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   601 â”‚   â”‚   for decorator in decorators:                                                                                    â”‚           
                               â”‚   602 â”‚   â”‚   â”‚   meth = decorator(meth)                                                                                      â”‚           
                               â”‚   603 â”‚   â”‚                                                                                                                   â”‚           
                               â”‚ â± 604 â”‚   â”‚   resp = meth(*args, **kwargs)                                                                                    â”‚           
                               â”‚   605 â”‚   â”‚                                                                                                                   â”‚           
                               â”‚   606 â”‚   â”‚   if isinstance(resp, ResponseBase):  # There may be a better way to test                                         â”‚           
                               â”‚   607 â”‚   â”‚   â”‚   return resp                                                                                                 â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/projects/python/check-cefet-refactor/app/infrastructure/http/study_resource.py:18 in post                        â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   15 â”‚   def post(self):                                                                                                      â”‚           
                               â”‚   16 â”‚   â”‚   data = request.json                                                                                              â”‚           
                               â”‚   17 â”‚   â”‚   study = Study(data['uncheck-user-id'] ,data['name'], data['code'])                                               â”‚           
                               â”‚ â± 18 â”‚   â”‚   self.service.save(study)                                                                                         â”‚           
                               â”‚   19 â”‚   â”‚   return {'message': 'message has been created successfully.'}, 201                                                â”‚           
                               â”‚   20                                                                                                                          â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/projects/python/check-cefet-refactor/app/domain/study/study_service.py:20 in save                                â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   17 â”‚   â”‚   self.logger.info(f"Linked study: {study.name} with deviceId: {uncheck.deviceId}                                  â”‚           
                               â”‚      ğŸ“")                                                                                                                     â”‚           
                               â”‚   18 â”‚   â”‚   self.repository.save(study)                                                                                      â”‚           
                               â”‚   19 â”‚   â”‚   uncheck.linked = True                                                                                            â”‚           
                               â”‚ â± 20 â”‚   â”‚   self.uncheckUserService.update(uncheck)                                                                          â”‚           
                               â”‚   21 â”‚                                                                                                                        â”‚           
                               â”‚   22 â”‚   def find_user_by_uncheck_id(self, unId):                                                                             â”‚           
                               â”‚   23 â”‚   â”‚   self.repository.find_user_by_uncheck_id(unId)                                                                    â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/projects/python/check-cefet-refactor/app/domain/uncheck_user/uncheck_user_service.py:15 in update                â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   12 â”‚   â”‚   self.repository.save(UncheckUser(deviceId))                                                                      â”‚           
                               â”‚   13 â”‚                                                                                                                        â”‚           
                               â”‚   14 â”‚   def update(self, unchek : UncheckUser):                                                                              â”‚           
                               â”‚ â± 15 â”‚   â”‚   self.repository.update(unchek)                                                                                   â”‚           
                               â”‚   16 â”‚                                                                                                                        â”‚           
                               â”‚   17 â”‚   def find_one(self, id) -> Optional[UncheckUser]:                                                                     â”‚           
                               â”‚   18 â”‚   â”‚   return self.repository.find_one(id)                                                                              â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/projects/python/check-cefet-refactor/app/infrastructure/database/uncheck_repository.py:29 in update              â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   26 â”‚                                                                                                                        â”‚           
                               â”‚   27 â”‚   def update(self, uncheck : UncheckUser):                                                                             â”‚           
                               â”‚   28 â”‚   â”‚   self.logger.info(f"Update uncheck user with deviceId: {uncheck.deviceId} ğŸ“²")                                    â”‚           
                               â”‚ â± 29 â”‚   â”‚   return                                                                                                           â”‚           
                               â”‚      self.mongo[settings.get("MONGO_DATABASE")][self.collection].update_one({"_id":uncheck._i                                 â”‚           
                               â”‚      d},                                                                                                                      â”‚           
                               â”‚   30 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚                                        â”‚           
                               â”‚      {"linked":uncheck.linked})                                                                                               â”‚           
                               â”‚   31 â”‚                                                                                                                        â”‚           
                               â”‚   32 â”‚   def save(self, uncheck : UncheckUser):                                                                               â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/pymongo/collection.py:1081 in update_one               â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   1078 â”‚   â”‚   .. versionadded:: 3.0                                                                                          â”‚           
                               â”‚   1079 â”‚   â”‚   """                                                                                                            â”‚           
                               â”‚   1080 â”‚   â”‚   common.validate_is_mapping("filter", filter)                                                                   â”‚           
                               â”‚ â± 1081 â”‚   â”‚   common.validate_ok_for_update(update)                                                                          â”‚           
                               â”‚   1082 â”‚   â”‚   common.validate_list_or_none("array_filters", array_filters)                                                   â”‚           
                               â”‚   1083 â”‚   â”‚                                                                                                                  â”‚           
                               â”‚   1084 â”‚   â”‚   write_concern = self._write_concern_for(session)                                                               â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/pymongo/common.py:618 in validate_ok_for_update        â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚    615 â”‚   is_document = not isinstance(update, list)                                                                         â”‚           
                               â”‚    616 â”‚   first = next(iter(update))                                                                                         â”‚           
                               â”‚    617 â”‚   if is_document and not first.startswith("$"):                                                                      â”‚           
                               â”‚ â±  618 â”‚   â”‚   raise ValueError("update only works with $ operators")                                                         â”‚           
                               â”‚    619                                                                                                                        â”‚           
                               â”‚    620                                                                                                                        â”‚           
                               â”‚    621 _UNICODE_DECODE_ERROR_HANDLERS = frozenset(["strict", "replace", "ignore"])                                            â”‚           
                               â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯           
                               ValueError: update only works with $ operators                                                                                              
[2024/08/24 17:12;09] INFO     127.0.0.1 - - [24/Aug/2024 17:12:09] "[35m[1mPOST /user HTTP/1.1[0m" 500 -                                                   _internal.py:96
mongo mongodb://root:example@localhost:27017/
[2024/08/24 17:13;15] INFO     [Consumer:check-in-class] ğŸš©  Try connect in MQTT Server                                                           uncheck_user_broker.py:31
[2024/08/24 17:13;16] INFO     [Consumer:check-in-class] New client MQTT in broker.emqx.io:1883                                                   uncheck_user_broker.py:34
                      INFO     [Consumer:check-in-class] Subscribe in check-in-class ğŸ“ª                                                           uncheck_user_broker.py:45
 * Debug mode: off
                      INFO     [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server         _internal.py:96
                               instead.[0m                                                                                                                                 
                                * Running on http://127.0.0.1:5000                                                                                                         
                      INFO     [33mPress CTRL+C to quit[0m                                                                                                  _internal.py:96
CONNECTED IN MQTT SERVER:âœ”ï¸
[2024/08/24 17:13;18] INFO     [Service:StudyService] Linked study: Marcos with deviceId: None ğŸ“                                                       study_service.py:17
                      INFO     [Repository:uncheck] Update uncheck user with deviceId: None ğŸ“²                                                     uncheck_repository.py:28
                      ERROR    Exception on /user [POST]                                                                                                         app.py:838
                               â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/flask/app.py:880 in full_dispatch_request              â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚    877 â”‚   â”‚   â”‚   request_started.send(self, _async_wrapper=self.ensure_sync)                                                â”‚           
                               â”‚    878 â”‚   â”‚   â”‚   rv = self.preprocess_request()                                                                             â”‚           
                               â”‚    879 â”‚   â”‚   â”‚   if rv is None:                                                                                             â”‚           
                               â”‚ â±  880 â”‚   â”‚   â”‚   â”‚   rv = self.dispatch_request()                                                                           â”‚           
                               â”‚    881 â”‚   â”‚   except Exception as e:                                                                                         â”‚           
                               â”‚    882 â”‚   â”‚   â”‚   rv = self.handle_user_exception(e)                                                                         â”‚           
                               â”‚    883 â”‚   â”‚   return self.finalize_request(rv)                                                                               â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/flask/app.py:865 in dispatch_request                   â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚    862 â”‚   â”‚   â”‚   return self.make_default_options_response()                                                                â”‚           
                               â”‚    863 â”‚   â”‚   # otherwise dispatch to the handler for that endpoint                                                          â”‚           
                               â”‚    864 â”‚   â”‚   view_args: dict[str, t.Any] = req.view_args  # type: ignore[assignment]                                        â”‚           
                               â”‚ â±  865 â”‚   â”‚   return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  #                                    â”‚           
                               â”‚        type: ignore[no-any-return]                                                                                            â”‚           
                               â”‚    866 â”‚                                                                                                                      â”‚           
                               â”‚    867 â”‚   def full_dispatch_request(self) -> Response:                                                                       â”‚           
                               â”‚    868 â”‚   â”‚   """Dispatches the request and on top of that performs request                                                  â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/flask_restful/__init__.py:489 in wrapper               â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   486 â”‚   â”‚   """                                                                                                             â”‚           
                               â”‚   487 â”‚   â”‚   @wraps(resource)                                                                                                â”‚           
                               â”‚   488 â”‚   â”‚   def wrapper(*args, **kwargs):                                                                                   â”‚           
                               â”‚ â± 489 â”‚   â”‚   â”‚   resp = resource(*args, **kwargs)                                                                            â”‚           
                               â”‚   490 â”‚   â”‚   â”‚   if isinstance(resp, ResponseBase):  # There may be a better way to test                                     â”‚           
                               â”‚   491 â”‚   â”‚   â”‚   â”‚   return resp                                                                                             â”‚           
                               â”‚   492 â”‚   â”‚   â”‚   data, code, headers = unpack(resp)                                                                          â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/flask/views.py:110 in view                             â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   107 â”‚   â”‚   â”‚   â”‚   self = view.view_class(  # type: ignore[attr-defined]                                                   â”‚           
                               â”‚   108 â”‚   â”‚   â”‚   â”‚   â”‚   *class_args, **class_kwargs                                                                         â”‚           
                               â”‚   109 â”‚   â”‚   â”‚   â”‚   )                                                                                                       â”‚           
                               â”‚ â± 110 â”‚   â”‚   â”‚   â”‚   return current_app.ensure_sync(self.dispatch_request)(**kwargs)  # type:                                â”‚           
                               â”‚       ignore[no-any-return]                                                                                                   â”‚           
                               â”‚   111 â”‚   â”‚                                                                                                                   â”‚           
                               â”‚   112 â”‚   â”‚   else:                                                                                                           â”‚           
                               â”‚   113 â”‚   â”‚   â”‚   self = cls(*class_args, **class_kwargs)                                                                     â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/flask_restful/__init__.py:604 in dispatch_request      â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   601 â”‚   â”‚   for decorator in decorators:                                                                                    â”‚           
                               â”‚   602 â”‚   â”‚   â”‚   meth = decorator(meth)                                                                                      â”‚           
                               â”‚   603 â”‚   â”‚                                                                                                                   â”‚           
                               â”‚ â± 604 â”‚   â”‚   resp = meth(*args, **kwargs)                                                                                    â”‚           
                               â”‚   605 â”‚   â”‚                                                                                                                   â”‚           
                               â”‚   606 â”‚   â”‚   if isinstance(resp, ResponseBase):  # There may be a better way to test                                         â”‚           
                               â”‚   607 â”‚   â”‚   â”‚   return resp                                                                                                 â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/projects/python/check-cefet-refactor/app/infrastructure/http/study_resource.py:18 in post                        â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   15 â”‚   def post(self):                                                                                                      â”‚           
                               â”‚   16 â”‚   â”‚   data = request.json                                                                                              â”‚           
                               â”‚   17 â”‚   â”‚   study = Study(data['uncheck-user-id'] ,data['name'], data['code'])                                               â”‚           
                               â”‚ â± 18 â”‚   â”‚   self.service.save(study)                                                                                         â”‚           
                               â”‚   19 â”‚   â”‚   return {'message': 'message has been created successfully.'}, 201                                                â”‚           
                               â”‚   20                                                                                                                          â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/projects/python/check-cefet-refactor/app/domain/study/study_service.py:20 in save                                â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   17 â”‚   â”‚   self.logger.info(f"Linked study: {study.name} with deviceId: {uncheck.deviceId}                                  â”‚           
                               â”‚      ğŸ“")                                                                                                                     â”‚           
                               â”‚   18 â”‚   â”‚   self.repository.save(study)                                                                                      â”‚           
                               â”‚   19 â”‚   â”‚   uncheck.linked = True                                                                                            â”‚           
                               â”‚ â± 20 â”‚   â”‚   self.uncheckUserService.update(uncheck)                                                                          â”‚           
                               â”‚   21 â”‚                                                                                                                        â”‚           
                               â”‚   22 â”‚   def find_user_by_uncheck_id(self, unId):                                                                             â”‚           
                               â”‚   23 â”‚   â”‚   self.repository.find_user_by_uncheck_id(unId)                                                                    â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/projects/python/check-cefet-refactor/app/domain/uncheck_user/uncheck_user_service.py:15 in update                â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   12 â”‚   â”‚   self.repository.save(UncheckUser(deviceId))                                                                      â”‚           
                               â”‚   13 â”‚                                                                                                                        â”‚           
                               â”‚   14 â”‚   def update(self, unchek : UncheckUser):                                                                              â”‚           
                               â”‚ â± 15 â”‚   â”‚   self.repository.update(unchek)                                                                                   â”‚           
                               â”‚   16 â”‚                                                                                                                        â”‚           
                               â”‚   17 â”‚   def find_one(self, id) -> Optional[UncheckUser]:                                                                     â”‚           
                               â”‚   18 â”‚   â”‚   return self.repository.find_one(id)                                                                              â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/projects/python/check-cefet-refactor/app/infrastructure/database/uncheck_repository.py:29 in update              â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   26 â”‚                                                                                                                        â”‚           
                               â”‚   27 â”‚   def update(self, uncheck : UncheckUser):                                                                             â”‚           
                               â”‚   28 â”‚   â”‚   self.logger.info(f"Update uncheck user with deviceId: {uncheck.deviceId} ğŸ“²")                                    â”‚           
                               â”‚ â± 29 â”‚   â”‚   return                                                                                                           â”‚           
                               â”‚      self.mongo[settings.get("MONGO_DATABASE")][self.collection].update_one({"_id":ObjectId(u                                 â”‚           
                               â”‚      ncheck._id)},                                                                                                            â”‚           
                               â”‚   30 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚                                        â”‚           
                               â”‚      {"linked":uncheck.linked})                                                                                               â”‚           
                               â”‚   31 â”‚                                                                                                                        â”‚           
                               â”‚   32 â”‚   def save(self, uncheck : UncheckUser):                                                                               â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/pymongo/collection.py:1081 in update_one               â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   1078 â”‚   â”‚   .. versionadded:: 3.0                                                                                          â”‚           
                               â”‚   1079 â”‚   â”‚   """                                                                                                            â”‚           
                               â”‚   1080 â”‚   â”‚   common.validate_is_mapping("filter", filter)                                                                   â”‚           
                               â”‚ â± 1081 â”‚   â”‚   common.validate_ok_for_update(update)                                                                          â”‚           
                               â”‚   1082 â”‚   â”‚   common.validate_list_or_none("array_filters", array_filters)                                                   â”‚           
                               â”‚   1083 â”‚   â”‚                                                                                                                  â”‚           
                               â”‚   1084 â”‚   â”‚   write_concern = self._write_concern_for(session)                                                               â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/pymongo/common.py:618 in validate_ok_for_update        â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚    615 â”‚   is_document = not isinstance(update, list)                                                                         â”‚           
                               â”‚    616 â”‚   first = next(iter(update))                                                                                         â”‚           
                               â”‚    617 â”‚   if is_document and not first.startswith("$"):                                                                      â”‚           
                               â”‚ â±  618 â”‚   â”‚   raise ValueError("update only works with $ operators")                                                         â”‚           
                               â”‚    619                                                                                                                        â”‚           
                               â”‚    620                                                                                                                        â”‚           
                               â”‚    621 _UNICODE_DECODE_ERROR_HANDLERS = frozenset(["strict", "replace", "ignore"])                                            â”‚           
                               â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯           
                               ValueError: update only works with $ operators                                                                                              
                      INFO     127.0.0.1 - - [24/Aug/2024 17:13:18] "[35m[1mPOST /user HTTP/1.1[0m" 500 -                                                   _internal.py:96
[2024/08/24 17:13;19] INFO     [Service:StudyService] Linked study: Marcos with deviceId: None ğŸ“                                                       study_service.py:17
                      INFO     [Repository:uncheck] Update uncheck user with deviceId: None ğŸ“²                                                     uncheck_repository.py:28
                      ERROR    Exception on /user [POST]                                                                                                         app.py:838
                               â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/flask/app.py:880 in full_dispatch_request              â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚    877 â”‚   â”‚   â”‚   request_started.send(self, _async_wrapper=self.ensure_sync)                                                â”‚           
                               â”‚    878 â”‚   â”‚   â”‚   rv = self.preprocess_request()                                                                             â”‚           
                               â”‚    879 â”‚   â”‚   â”‚   if rv is None:                                                                                             â”‚           
                               â”‚ â±  880 â”‚   â”‚   â”‚   â”‚   rv = self.dispatch_request()                                                                           â”‚           
                               â”‚    881 â”‚   â”‚   except Exception as e:                                                                                         â”‚           
                               â”‚    882 â”‚   â”‚   â”‚   rv = self.handle_user_exception(e)                                                                         â”‚           
                               â”‚    883 â”‚   â”‚   return self.finalize_request(rv)                                                                               â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/flask/app.py:865 in dispatch_request                   â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚    862 â”‚   â”‚   â”‚   return self.make_default_options_response()                                                                â”‚           
                               â”‚    863 â”‚   â”‚   # otherwise dispatch to the handler for that endpoint                                                          â”‚           
                               â”‚    864 â”‚   â”‚   view_args: dict[str, t.Any] = req.view_args  # type: ignore[assignment]                                        â”‚           
                               â”‚ â±  865 â”‚   â”‚   return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  #                                    â”‚           
                               â”‚        type: ignore[no-any-return]                                                                                            â”‚           
                               â”‚    866 â”‚                                                                                                                      â”‚           
                               â”‚    867 â”‚   def full_dispatch_request(self) -> Response:                                                                       â”‚           
                               â”‚    868 â”‚   â”‚   """Dispatches the request and on top of that performs request                                                  â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/flask_restful/__init__.py:489 in wrapper               â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   486 â”‚   â”‚   """                                                                                                             â”‚           
                               â”‚   487 â”‚   â”‚   @wraps(resource)                                                                                                â”‚           
                               â”‚   488 â”‚   â”‚   def wrapper(*args, **kwargs):                                                                                   â”‚           
                               â”‚ â± 489 â”‚   â”‚   â”‚   resp = resource(*args, **kwargs)                                                                            â”‚           
                               â”‚   490 â”‚   â”‚   â”‚   if isinstance(resp, ResponseBase):  # There may be a better way to test                                     â”‚           
                               â”‚   491 â”‚   â”‚   â”‚   â”‚   return resp                                                                                             â”‚           
                               â”‚   492 â”‚   â”‚   â”‚   data, code, headers = unpack(resp)                                                                          â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/flask/views.py:110 in view                             â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   107 â”‚   â”‚   â”‚   â”‚   self = view.view_class(  # type: ignore[attr-defined]                                                   â”‚           
                               â”‚   108 â”‚   â”‚   â”‚   â”‚   â”‚   *class_args, **class_kwargs                                                                         â”‚           
                               â”‚   109 â”‚   â”‚   â”‚   â”‚   )                                                                                                       â”‚           
                               â”‚ â± 110 â”‚   â”‚   â”‚   â”‚   return current_app.ensure_sync(self.dispatch_request)(**kwargs)  # type:                                â”‚           
                               â”‚       ignore[no-any-return]                                                                                                   â”‚           
                               â”‚   111 â”‚   â”‚                                                                                                                   â”‚           
                               â”‚   112 â”‚   â”‚   else:                                                                                                           â”‚           
                               â”‚   113 â”‚   â”‚   â”‚   self = cls(*class_args, **class_kwargs)                                                                     â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/flask_restful/__init__.py:604 in dispatch_request      â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   601 â”‚   â”‚   for decorator in decorators:                                                                                    â”‚           
                               â”‚   602 â”‚   â”‚   â”‚   meth = decorator(meth)                                                                                      â”‚           
                               â”‚   603 â”‚   â”‚                                                                                                                   â”‚           
                               â”‚ â± 604 â”‚   â”‚   resp = meth(*args, **kwargs)                                                                                    â”‚           
                               â”‚   605 â”‚   â”‚                                                                                                                   â”‚           
                               â”‚   606 â”‚   â”‚   if isinstance(resp, ResponseBase):  # There may be a better way to test                                         â”‚           
                               â”‚   607 â”‚   â”‚   â”‚   return resp                                                                                                 â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/projects/python/check-cefet-refactor/app/infrastructure/http/study_resource.py:18 in post                        â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   15 â”‚   def post(self):                                                                                                      â”‚           
                               â”‚   16 â”‚   â”‚   data = request.json                                                                                              â”‚           
                               â”‚   17 â”‚   â”‚   study = Study(data['uncheck-user-id'] ,data['name'], data['code'])                                               â”‚           
                               â”‚ â± 18 â”‚   â”‚   self.service.save(study)                                                                                         â”‚           
                               â”‚   19 â”‚   â”‚   return {'message': 'message has been created successfully.'}, 201                                                â”‚           
                               â”‚   20                                                                                                                          â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/projects/python/check-cefet-refactor/app/domain/study/study_service.py:20 in save                                â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   17 â”‚   â”‚   self.logger.info(f"Linked study: {study.name} with deviceId: {uncheck.deviceId}                                  â”‚           
                               â”‚      ğŸ“")                                                                                                                     â”‚           
                               â”‚   18 â”‚   â”‚   self.repository.save(study)                                                                                      â”‚           
                               â”‚   19 â”‚   â”‚   uncheck.linked = True                                                                                            â”‚           
                               â”‚ â± 20 â”‚   â”‚   self.uncheckUserService.update(uncheck)                                                                          â”‚           
                               â”‚   21 â”‚                                                                                                                        â”‚           
                               â”‚   22 â”‚   def find_user_by_uncheck_id(self, unId):                                                                             â”‚           
                               â”‚   23 â”‚   â”‚   self.repository.find_user_by_uncheck_id(unId)                                                                    â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/projects/python/check-cefet-refactor/app/domain/uncheck_user/uncheck_user_service.py:15 in update                â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   12 â”‚   â”‚   self.repository.save(UncheckUser(deviceId))                                                                      â”‚           
                               â”‚   13 â”‚                                                                                                                        â”‚           
                               â”‚   14 â”‚   def update(self, unchek : UncheckUser):                                                                              â”‚           
                               â”‚ â± 15 â”‚   â”‚   self.repository.update(unchek)                                                                                   â”‚           
                               â”‚   16 â”‚                                                                                                                        â”‚           
                               â”‚   17 â”‚   def find_one(self, id) -> Optional[UncheckUser]:                                                                     â”‚           
                               â”‚   18 â”‚   â”‚   return self.repository.find_one(id)                                                                              â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/projects/python/check-cefet-refactor/app/infrastructure/database/uncheck_repository.py:29 in update              â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   26 â”‚                                                                                                                        â”‚           
                               â”‚   27 â”‚   def update(self, uncheck : UncheckUser):                                                                             â”‚           
                               â”‚   28 â”‚   â”‚   self.logger.info(f"Update uncheck user with deviceId: {uncheck.deviceId} ğŸ“²")                                    â”‚           
                               â”‚ â± 29 â”‚   â”‚   return                                                                                                           â”‚           
                               â”‚      self.mongo[settings.get("MONGO_DATABASE")][self.collection].update_one({"_id":ObjectId(u                                 â”‚           
                               â”‚      ncheck._id)},                                                                                                            â”‚           
                               â”‚   30 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚                                        â”‚           
                               â”‚      {"linked":uncheck.linked})                                                                                               â”‚           
                               â”‚   31 â”‚                                                                                                                        â”‚           
                               â”‚   32 â”‚   def save(self, uncheck : UncheckUser):                                                                               â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/pymongo/collection.py:1081 in update_one               â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚   1078 â”‚   â”‚   .. versionadded:: 3.0                                                                                          â”‚           
                               â”‚   1079 â”‚   â”‚   """                                                                                                            â”‚           
                               â”‚   1080 â”‚   â”‚   common.validate_is_mapping("filter", filter)                                                                   â”‚           
                               â”‚ â± 1081 â”‚   â”‚   common.validate_ok_for_update(update)                                                                          â”‚           
                               â”‚   1082 â”‚   â”‚   common.validate_list_or_none("array_filters", array_filters)                                                   â”‚           
                               â”‚   1083 â”‚   â”‚                                                                                                                  â”‚           
                               â”‚   1084 â”‚   â”‚   write_concern = self._write_concern_for(session)                                                               â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚ /home/marcos/.asdf/installs/python/3.12.1/lib/python3.12/site-packages/pymongo/common.py:618 in validate_ok_for_update        â”‚           
                               â”‚                                                                                                                               â”‚           
                               â”‚    615 â”‚   is_document = not isinstance(update, list)                                                                         â”‚           
                               â”‚    616 â”‚   first = next(iter(update))                                                                                         â”‚           
                               â”‚    617 â”‚   if is_document and not first.startswith("$"):                                                                      â”‚           
                               â”‚ â±  618 â”‚   â”‚   raise ValueError("update only works with $ operators")                                                         â”‚           
                               â”‚    619                                                                                                                        â”‚           
                               â”‚    620                                                                                                                        â”‚           
                               â”‚    621 _UNICODE_DECODE_ERROR_HANDLERS = frozenset(["strict", "replace", "ignore"])                                            â”‚           
                               â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯           
                               ValueError: update only works with $ operators                                                                                              
                      INFO     127.0.0.1 - - [24/Aug/2024 17:13:19] "[35m[1mPOST /user HTTP/1.1[0m" 500 -                                                   _internal.py:96
mongo mongodb://root:example@localhost:27017/
[2024/08/24 17:14;22] INFO     [Consumer:check-in-class] ğŸš©  Try connect in MQTT Server                                                           uncheck_user_broker.py:31
 * Debug mode: off
                      INFO     [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server         _internal.py:96
                               instead.[0m                                                                                                                                 
                                * Running on http://127.0.0.1:5000                                                                                                         
                      INFO     [33mPress CTRL+C to quit[0m                                                                                                  _internal.py:96
                      INFO     [Consumer:check-in-class] New client MQTT in broker.emqx.io:1883                                                   uncheck_user_broker.py:34
                      INFO     [Consumer:check-in-class] Subscribe in check-in-class ğŸ“ª                                                           uncheck_user_broker.py:45
CONNECTED IN MQTT SERVER:âœ”ï¸
mongo mongodb://root:example@localhost:27017/
[2024/08/24 17:14;25] INFO     [Consumer:check-in-class] ğŸš©  Try connect in MQTT Server                                                           uncheck_user_broker.py:31
 * Debug mode: off
                      INFO     [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server         _internal.py:96
                               instead.[0m                                                                                                                                 
                                * Running on http://127.0.0.1:5000                                                                                                         
                      INFO     [33mPress CTRL+C to quit[0m                                                                                                  _internal.py:96
                      INFO     [Consumer:check-in-class] New client MQTT in broker.emqx.io:1883                                                   uncheck_user_broker.py:34
                      INFO     [Consumer:check-in-class] Subscribe in check-in-class ğŸ“ª                                                           uncheck_user_broker.py:45
CONNECTED IN MQTT SERVER:âœ”ï¸
[2024/08/24 17:14;26] INFO     [Service:StudyService] Linked study: Marcos with deviceId: None ğŸ“                                                       study_service.py:17
                      INFO     [Repository:uncheck] Update uncheck user with deviceId: None ğŸ“²                                                     uncheck_repository.py:28
                      INFO     127.0.0.1 - - [24/Aug/2024 17:14:26] "[35m[1mPOST /user HTTP/1.1[0m" 201 -                                                   _internal.py:96
[2024/08/24 17:14;27] INFO     [Service:StudyService] Linked study: Marcos with deviceId: None ğŸ“                                                       study_service.py:17
                      INFO     [Repository:uncheck] Update uncheck user with deviceId: None ğŸ“²                                                     uncheck_repository.py:28
                      INFO     127.0.0.1 - - [24/Aug/2024 17:14:27] "[35m[1mPOST /user HTTP/1.1[0m" 201 -                                                   _internal.py:96
[2024/08/24 17:16;49] INFO     [Consumer:check-in-class] Received `12312312231` from `check-in-class` topic ğŸ“­                                    uncheck_user_broker.py:39
                      INFO     [Repository:uncheck] save new uncheck user with deviceId: None ğŸ“²                                                   uncheck_repository.py:34
[2024/08/24 17:17;22] INFO     [Consumer:check-in-class] Received `12312312231` from `check-in-class` topic ğŸ“­                                    uncheck_user_broker.py:39
                      INFO     [Repository:uncheck] save new uncheck user with deviceId: None ğŸ“²                                                   uncheck_repository.py:34
mongo mongodb://root:example@localhost:27017/
[2024/08/24 17:31;11] INFO     [Consumer:check-in-class] ğŸš©  Try connect in MQTT Server                                                           uncheck_user_broker.py:31
 * Debug mode: off
[2024/08/24 17:31;12] INFO     [Consumer:check-in-class] New client MQTT in broker.emqx.io:1883                                                   uncheck_user_broker.py:34
                      INFO     [Consumer:check-in-class] Subscribe in check-in-class ğŸ“ª                                                           uncheck_user_broker.py:45
CONNECTED IN MQTT SERVER:âœ”ï¸
mongo mongodb://root:example@localhost:27017/
[2024/08/24 18:09;10] INFO     [Consumer:check-in-class] ğŸš©  Try connect in MQTT Server                                                           uncheck_user_broker.py:31
 * Debug mode: off
                      INFO     [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server         _internal.py:96
                               instead.[0m                                                                                                                                 
                                * Running on http://127.0.0.1:5000                                                                                                         
                      INFO     [33mPress CTRL+C to quit[0m                                                                                                  _internal.py:96
                      INFO     [Consumer:check-in-class] New client MQTT in broker.emqx.io:1883                                                   uncheck_user_broker.py:34
                      INFO     [Consumer:check-in-class] Subscribe in check-in-class ğŸ“ª                                                           uncheck_user_broker.py:45
CONNECTED IN MQTT SERVER:âœ”ï¸
[2024/08/24 18:09;51] INFO     [Consumer:check-in-class] Received `12312312231` from `check-in-class` topic ğŸ“­                                    uncheck_user_broker.py:39
                      INFO     [UserRepository:study] Try find a User with uncheck id : 66ca43bca7fe2a2f652e37ea ğŸ“²                                  study_repository.py:23
                      INFO     [Service:CheckinService] User found : Marcos with code 22312312231 ğŸ‘¨â€ğŸ“                                                checkin_service.py:24
                      INFO     [Service:ClassService] Classes registered at the moment IOT ğŸ«                                                 class_scherdule_service.py:18
                      INFO     [Repository:class] update class with id: 66ca497275643bcabfd6169a ğŸ§¾                                                  class_repository.py:35
mongo mongodb://root:example@localhost:27017/
[2024/08/24 18:10;19] INFO     [Consumer:check-in-class] ğŸš©  Try connect in MQTT Server                                                           uncheck_user_broker.py:31
 * Debug mode: off
                      INFO     [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server         _internal.py:96
                               instead.[0m                                                                                                                                 
                                * Running on http://127.0.0.1:5000                                                                                                         
                      INFO     [33mPress CTRL+C to quit[0m                                                                                                  _internal.py:96
                      INFO     [Consumer:check-in-class] New client MQTT in broker.emqx.io:1883                                                   uncheck_user_broker.py:34
                      INFO     [Consumer:check-in-class] Subscribe in check-in-class ğŸ“ª                                                           uncheck_user_broker.py:45
CONNECTED IN MQTT SERVER:âœ”ï¸
[2024/08/24 18:10;21] INFO     [Consumer:check-in-class] Received `12312312231` from `check-in-class` topic ğŸ“­                                    uncheck_user_broker.py:39
                      INFO     [UserRepository:study] Try find a User with uncheck id : 66ca43bca7fe2a2f652e37ea ğŸ“²                                  study_repository.py:23
                      INFO     [Service:CheckinService] User found : Marcos with code 22312312231 ğŸ‘¨â€ğŸ“                                                checkin_service.py:24
                      INFO     [Service:ClassService] Classes registered at the moment IOT ğŸ«                                                 class_scherdule_service.py:18
                      INFO     [Repository:class] update class with id: 66ca497275643bcabfd6169a ğŸ§¾                                                  class_repository.py:35
